multiscrape:
scrape:
rest:
  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"ERROR_BACK":true,"LOAD":{"loading":true},"body":{"password":"6c71f5f1fb46743d4291a20fdcbf646a.WdENgttHaU5Rt611y3IJWxjda8rOpI5gRExSovO7bI0=","user_name":"Raguere33"},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/iam/auth_login"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: estar_token_language=fr_fr
    sensor:
      - name: "Estar Token"
        unique_id: "estar_token"
        json_attributes_path: "$.data"
        value_template: "{{ value_json.message }}"
        icon: mdi:cookie
        json_attributes:
          - "token"

  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"body":{"id":6886470},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/pvm/station_select_device_of_tree"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: "estar_token=2.2Qia8euoFcV3KvzkLd8tIuqmPy5Ge5jjIHzqR2zE7vWYgImMn8nMq68NAeqOGZIZlsNxZIV4apElPPVC4fBQQ7CE1ZdY.0"
    sensor:
      - name: "Estar DCU"
        unique_id: "estar_dcu_data"
        icon: mdi:network-pos
        json_attributes_path: "$.data[0]"
        value_template: "{{ value_json.data[0].warn_data.connect}}"
        json_attributes:
          - "id"
          - "vc"
          - "sn"
          - "model_no"
          - "soft_ver"
          - "hard_ver"
          - "warn_data"

  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"body":{"id":6886470},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/pvm/station_select_device_of_tree"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: estar_token=2.2Qia8euoFcV3KvzkLd8tIuqmPy5Ge5jjIHzqR2zE7vWYgImMn8nMq68NAeqOGZIZlsNxZIV4apElPPVC4fBQQ7CE1ZdY.0
    sensor:
      - name: "Estar MO1"
        unique_id: "estar_mo1_data"
        icon: mdi:solar-panel
        json_attributes_path: "$.data[0].children[0]"
        value_template: "{{ value_json.data[0].children[0].warn_data.connect}}"
        json_attributes:
          - "id"
          - "sn"
          - "vc"
          - "dtu_sn"
          - "type"
          - "model_no"
          - "soft_ver"
          - "hard_ver"
          - "warn_data"
          - "extend_data"

  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"body":{"id":6886470},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/pvm/station_select_device_of_tree"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: estar_token=2.2Qia8euoFcV3KvzkLd8tIuqmPy5Ge5jjIHzqR2zE7vWYgImMn8nMq68NAeqOGZIZlsNxZIV4apElPPVC4fBQQ7CE1ZdY.0
    sensor:
      - name: "Estar MO2"
        unique_id: "estar_mo2_data"
        icon: mdi:solar-panel
        json_attributes_path: "$.data[0].children[1]"
        value_template: "{{ value_json.data[0].children[1].warn_data.connect}}"
        json_attributes:
          - "id"
          - "sn"
          - "vc"
          - "dtu_sn"
          - "type"
          - "model_no"
          - "soft_ver"
          - "hard_ver"
          - "warn_data"
          - "extend_data"

  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"body":{"id":6886470},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/pvm/station_select_device_of_tree"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: estar_token=2.2Qia8euoFcV3KvzkLd8tIuqmPy5Ge5jjIHzqR2zE7vWYgImMn8nMq68NAeqOGZIZlsNxZIV4apElPPVC4fBQQ7CE1ZdY.0
    sensor:
      - name: "Estar MO3"
        unique_id: "estar_mo3_data"
        icon: mdi:solar-panel
        json_attributes_path: "$.data[0].children[2]"
        value_template: "{{ value_json.data[0].children[2].warn_data.connect}}"
        json_attributes:
          - "id"
          - "sn"
          - "vc"
          - "dtu_sn"
          - "type"
          - "model_no"
          - "soft_ver"
          - "hard_ver"
          - "warn_data"
          - "extend_data"

  - authentication: basic
    username: "Raguere33"
    password: "Celipo14"
    scan_interval: 3600
    method: POST
    payload: '{"body":{"id":6886470},"WAITING_PROMISE":true}'
    resource: "https://monitor.estarpower.com/platform/api/gateway/pvm/station_select_device_of_tree"
    headers:
      Content-Type: application/json;charset=UTF-8
      Cookie: estar_token=2.2Qia8euoFcV3KvzkLd8tIuqmPy5Ge5jjIHzqR2zE7vWYgImMn8nMq68NAeqOGZIZlsNxZIV4apElPPVC4fBQQ7CE1ZdY.0
    sensor:
      - name: "Estar MO4"
        unique_id: "estar_mo4_data"
        icon: mdi:solar-panel
        json_attributes_path: "$.data[0].children[3]"
        value_template: "{{ value_json.data[0].children[3].warn_data.connect}}"
        json_attributes:
          - "id"
          - "sn"
          - "vc"
          - "dtu_sn"
          - "type"
          - "model_no"
          - "soft_ver"
          - "hard_ver"
          - "warn_data"
          - "extend_data"
