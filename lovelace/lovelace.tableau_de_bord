{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace.tableau_de_bord",
  "data": {
    "config": {
      "views": [
        {
          "type": "sections",
          "cards": [],
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:power-flow-card-plus",
                  "entities": {
                    "battery": {
                      "entity": "",
                      "state_of_charge": "sensor.iphone_de_mat_old_battery_level"
                    },
                    "grid": {
                      "entity": {
                        "consumption": "sensor.consommation_reseau",
                        "production": "sensor.surplus_production"
                      },
                      "secondary_info": {},
                      "color_value": true
                    },
                    "solar": {
                      "entity": "sensor.production_solaire",
                      "display_zero_state": true,
                      "secondary_info": {},
                      "color_icon": true,
                      "color_value": true
                    },
                    "individual": [
                      {
                        "entity": "sensor.cumulus_2",
                        "secondary_info": {
                          "entity": "sensor.sonde_temperature_owon_temperature",
                          "unit_of_measurement": "°C",
                          "color_value": false,
                          "unit_white_space": true
                        },
                        "name": "ECS",
                        "icon": "mdi:water-boiler"
                      },
                      {
                        "entity": "sensor.disjoncteur_3_puissance_2",
                        "secondary_info": {},
                        "display_zero_tolerance": 20,
                        "name": "Clim",
                        "icon": "mdi:snowflake-thermometer",
                        "calculate_flow_rate": false,
                        "show_direction": false
                      },
                      {
                        "entity": "sensor.disjoncteur_4_puissance_2",
                        "secondary_info": {},
                        "color_value": false,
                        "display_zero_tolerance": 20,
                        "name": "Clim Salon"
                      },
                      {
                        "entity": "sensor.prise_frigo_puissance",
                        "secondary_info": {},
                        "color_value": false,
                        "display_zero_tolerance": 0,
                        "name": "Frigo"
                      }
                    ],
                    "home": {
                      "secondary_info": {},
                      "circle_animation": true,
                      "subtract_individual": true,
                      "override_state": false,
                      "color_value": true,
                      "color_icon": true,
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/tableau-de-bord/2"
                      }
                    }
                  },
                  "clickable_entities": true,
                  "display_zero_lines": {
                    "mode": "show",
                    "transparency": 50,
                    "grey_color": [
                      189,
                      189,
                      189
                    ]
                  },
                  "use_new_flow_rate_model": true,
                  "w_decimals": 0,
                  "kw_decimals": 2,
                  "min_flow_rate": 0.75,
                  "max_expected_power": 2000,
                  "min_expected_power": 0.01,
                  "watt_threshold": 1000,
                  "transparency_zero_lines": 0,
                  "max_flow_rate": 10,
                  "grid_options": {
                    "columns": 36,
                    "rows": 6
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.em06_b1_power",
                  "min": 0,
                  "needle": false,
                  "name": "Consommation Générale",
                  "max": 1000,
                  "severity": {
                    "green": 0,
                    "yellow": 200,
                    "red": 500
                  },
                  "grid_options": {
                    "columns": 9,
                    "rows": "auto"
                  }
                },
                {
                  "type": "gauge",
                  "min": 0,
                  "needle": false,
                  "name": "Consommation Réseau",
                  "max": 1000,
                  "severity": {
                    "green": 0,
                    "yellow": 150,
                    "red": 500
                  },
                  "entity": "sensor.consommation_reseau",
                  "grid_options": {
                    "columns": 9,
                    "rows": "auto"
                  }
                },
                {
                  "type": "gauge",
                  "min": 0,
                  "needle": false,
                  "name": "Production",
                  "max": 3000,
                  "entity": "sensor.production_solaire",
                  "severity": {
                    "green": 200,
                    "yellow": 1,
                    "red": 0
                  },
                  "grid_options": {
                    "columns": 9,
                    "rows": "auto"
                  }
                },
                {
                  "type": "gauge",
                  "min": 0,
                  "needle": false,
                  "name": "Surplus",
                  "max": 3000,
                  "entity": "sensor.surplus_production",
                  "severity": {
                    "green": 100,
                    "yellow": 10,
                    "red": 0
                  },
                  "grid_options": {
                    "columns": 9,
                    "rows": "auto"
                  }
                }
              ],
              "column_span": 3
            }
          ]
        },
        {
          "title": "Energie",
          "path": "energie",
          "icon": "mdi:lightning-bolt",
          "cards": [
            {
              "type": "custom:mini-graph-card",
              "name": "Conso minimum H24",
              "entities": [
                "sensor.conso_tr_mini_last_24h"
              ],
              "decimals": 0,
              "height": 0,
              "font_size": 120,
              "align_state": "center",
              "align_header": "center",
              "show": {
                "icon": false
              }
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "sensor.ecojoko_consommation_reseau"
                },
                {
                  "entity": "sensor.energie_solar_j"
                },
                {
                  "entity": "sensor.surplus_production_compteur"
                }
              ],
              "hours_to_show": 24,
              "min_y_axis": 0
            },
            {
              "chart_type": "line",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.conso_tr_mini_last_24h"
              ],
              "stat_types": [
                "min"
              ],
              "title": "Consommation mini",
              "hide_legend": true,
              "days_to_show": 26
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "sensor.em06_b1_power"
                },
                {
                  "entity": "sensor.consommation_reseau"
                }
              ],
              "hours_to_show": 24
            },
            {
              "chart_type": "line",
              "period": "hour",
              "type": "statistics-graph",
              "entities": [
                "sensor.cumulus_3"
              ],
              "stat_types": [
                "mean",
                "min",
                "max"
              ],
              "title": "Tension",
              "hide_legend": true,
              "days_to_show": 5
            },
            {
              "show_name": true,
              "show_icon": false,
              "type": "button",
              "tap_action": {
                "action": "more-info"
              },
              "show_state": true,
              "entity": "sensor.em06_b1_power_factor",
              "hold_action": {
                "action": "none"
              },
              "name": "PF General"
            },
            {
              "chart_type": "line",
              "period": "hour",
              "type": "statistics-graph",
              "entities": [
                "sensor.consommation_non_suivie_moyenne"
              ],
              "stat_types": [
                "mean"
              ],
              "title": "Consommation non suivie",
              "hide_legend": true,
              "days_to_show": 2
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.ecojoko_consommation_temps_reel",
                "sensor.em06_b1_power"
              ],
              "stat_types": [
                "mean"
              ],
              "title": "Consommation moyenne (j)",
              "hide_legend": true,
              "days_to_show": 15
            },
            {
              "chart_type": "bar",
              "period": "week",
              "type": "statistics-graph",
              "entities": [
                "sensor.ecojoko_consommation_temps_reel",
                "sensor.em06_b1_power"
              ],
              "stat_types": [
                "mean"
              ],
              "title": "Consommation moyenne (s)",
              "hide_legend": true,
              "days_to_show": 120
            },
            {
              "chart_type": "bar",
              "period": "month",
              "type": "statistics-graph",
              "entities": [
                "sensor.ecojoko_consommation_temps_reel",
                "sensor.em06_b1_power"
              ],
              "stat_types": [
                "mean"
              ],
              "title": "Consommation moyenne (m)",
              "hide_legend": true,
              "days_to_show": 120
            }
          ],
          "type": "custom:horizontal-layout"
        },
        {
          "icon": "mdi:target-variant",
          "cards": [
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "input_boolean.ecs"
                },
                {
                  "entity": "input_boolean.frigo"
                },
                {
                  "entity": "input_boolean.climatisation"
                },
                {
                  "entity": "input_boolean.clim_salon"
                },
                {
                  "entity": "input_boolean.prise_salon"
                },
                {
                  "entity": "input_boolean.tv"
                },
                {
                  "entity": "input_boolean.lave_vaisselle"
                },
                {
                  "entity": "input_boolean.lave_linge"
                },
                {
                  "entity": "input_boolean.plaque"
                },
                {
                  "entity": "input_boolean.four"
                },
                {
                  "entity": "input_boolean.lumieres_rdc"
                },
                {
                  "entity": "input_boolean.lumieres_etage"
                },
                {
                  "entity": "input_boolean.prises_etage"
                }
              ],
              "hours_to_show": 36,
              "title": "Appareils"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.em06_b1_power"
                },
                {
                  "entity": "sensor.consommation_reseau"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "sensor.puissance_socle"
                },
                {
                  "entity": "sensor.consommation_suivie"
                },
                {
                  "entity": "sensor.consommation_non_suivie"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "sensor.mesureur_n1_puissance_a",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.mesureur_n1_puissance_a')) | float(0) > 30 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_a1_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.em06_a1_power')) | float(0) > 30 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.mesureur_n1_puissance_b",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.mesureur_n1_puissance_b')) | float(0) > 20 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.disjoncteur_sonnette_local_puissance",
                  "secondary_info": "last-updated"
                },
                {
                  "entity": "sensor.prises_rdc",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.prises_rdc')) | float(0) > 20 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                }
              ],
              "state_color": true
            },
            {
              "show_name": true,
              "show_icon": true,
              "show_state": false,
              "type": "glance",
              "entities": [
                {
                  "entity": "input_boolean.ecs"
                },
                {
                  "entity": "input_boolean.frigo"
                },
                {
                  "entity": "input_boolean.climatisation"
                },
                {
                  "entity": "input_boolean.clim_salon"
                },
                {
                  "entity": "input_boolean.prise_salon"
                },
                {
                  "entity": "input_boolean.tv"
                },
                {
                  "entity": "input_boolean.lave_vaisselle"
                },
                {
                  "entity": "input_boolean.lave_linge"
                },
                {
                  "entity": "input_boolean.four"
                },
                {
                  "entity": "input_boolean.plaque"
                }
              ],
              "state_color": true,
              "visibility": [
                {
                  "condition": "user",
                  "users": []
                }
              ]
            },
            {
              "type": "custom:power-flow-card-plus",
              "entities": {
                "battery": {
                  "entity": "",
                  "state_of_charge": "sensor.iphone_de_mat_old_battery_level"
                },
                "grid": {
                  "entity": {
                    "0": "s",
                    "1": "e",
                    "2": "n",
                    "3": "s",
                    "4": "o",
                    "5": "r",
                    "6": ".",
                    "7": "d",
                    "8": "i",
                    "9": "s",
                    "10": "j",
                    "11": "o",
                    "12": "n",
                    "13": "c",
                    "14": "t",
                    "15": "e",
                    "16": "u",
                    "17": "r",
                    "18": "_",
                    "19": "s",
                    "20": "o",
                    "21": "n",
                    "22": "n",
                    "23": "e",
                    "24": "t",
                    "25": "t",
                    "26": "e",
                    "27": "_",
                    "28": "l",
                    "29": "o",
                    "30": "c",
                    "31": "a",
                    "32": "l",
                    "33": "_",
                    "34": "p",
                    "35": "u",
                    "36": "i",
                    "37": "s",
                    "38": "s",
                    "39": "a",
                    "40": "n",
                    "41": "c",
                    "42": "e",
                    "consumption": "sensor.consommation_reseau",
                    "production": "sensor.surplus_production"
                  },
                  "secondary_info": {},
                  "color_value": true
                },
                "solar": {
                  "entity": "sensor.production_solaire",
                  "display_zero_state": true,
                  "secondary_info": {},
                  "color_icon": true,
                  "color_value": true
                },
                "individual": [
                  {
                    "entity": "sensor.cumulus_2",
                    "secondary_info": {
                      "entity": "sensor.sonde_temperature_owon_temperature",
                      "unit_of_measurement": "°C",
                      "color_value": false,
                      "unit_white_space": true
                    },
                    "name": "ECS",
                    "icon": "mdi:water-boiler"
                  },
                  {
                    "entity": "sensor.disjoncteur_3_puissance_2",
                    "secondary_info": {},
                    "display_zero_tolerance": 20,
                    "name": "Clim",
                    "icon": "mdi:snowflake-thermometer",
                    "calculate_flow_rate": false,
                    "show_direction": false
                  },
                  {
                    "entity": "sensor.disjoncteur_4_puissance_2",
                    "secondary_info": {},
                    "color_value": false,
                    "display_zero_tolerance": 20,
                    "name": "Clim Salon"
                  }
                ],
                "home": {
                  "secondary_info": {},
                  "circle_animation": true,
                  "subtract_individual": true,
                  "override_state": false,
                  "color_value": true,
                  "color_icon": true,
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/tableau-de-bord/2"
                  }
                }
              },
              "clickable_entities": true,
              "display_zero_lines": {
                "mode": "show",
                "transparency": 50,
                "grey_color": [
                  189,
                  189,
                  189
                ]
              },
              "use_new_flow_rate_model": true,
              "w_decimals": 0,
              "kw_decimals": 2,
              "min_flow_rate": 0.75,
              "max_expected_power": 2000,
              "min_expected_power": 0.01,
              "watt_threshold": 1000,
              "transparency_zero_lines": 0,
              "max_flow_rate": 10
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "title": "ECS",
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_ecs_today",
                      "icon": "mdi:water-boiler",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_ecs_hier",
                      "icon": "mdi:water-boiler",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_ecs_semaine",
                      "icon": "mdi:water-boiler",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_ecs_mois",
                      "icon": "mdi:water-boiler",
                      "name": "Mois"
                    }
                  ],
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "title": "Frigo",
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_frigo_today",
                      "icon": "mdi:fridge",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_frigo_hier",
                      "icon": "mdi:fridge",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_frigo_semaine",
                      "icon": "mdi:fridge",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_frigo_mois",
                      "icon": "mdi:fridge",
                      "name": "Mois"
                    }
                  ],
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_salon_today",
                      "icon": "mdi:lightbulb",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_salon_hier",
                      "icon": "mdi:lightbulb",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_salon_semaine",
                      "icon": "mdi:lightbulb",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_salon_mois",
                      "icon": "mdi:lightbulb",
                      "name": "Mois"
                    }
                  ],
                  "title": "Salon",
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_tv_today",
                      "icon": "mdi:television",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_tv_hier",
                      "icon": "mdi:television",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_tv_semaine",
                      "icon": "mdi:television",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_tv_mois",
                      "icon": "mdi:television",
                      "name": "Mois"
                    }
                  ],
                  "title": "TV",
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_ll_today",
                      "icon": "mdi:washing-machine",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_ll_hier",
                      "icon": "mdi:washing-machine",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_ll_semaine",
                      "icon": "mdi:washing-machine",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_ll_mois",
                      "icon": "mdi:washing-machine",
                      "name": "Mois"
                    }
                  ],
                  "title": "Lave Linge",
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_lv_today",
                      "icon": "mdi:dishwasher",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_lv_hier",
                      "icon": "mdi:dishwasher",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_lv_semaine",
                      "icon": "mdi:dishwasher",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_lv_mois",
                      "icon": "mdi:dishwasher",
                      "name": "Mois"
                    }
                  ],
                  "title": "Lave Vaisselle",
                  "state_color": true
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "show_state": true,
                  "type": "glance",
                  "entities": [
                    {
                      "entity": "sensor.temps_allumage_four_today",
                      "icon": "mdi:stove",
                      "name": "Jour"
                    },
                    {
                      "entity": "sensor.temps_allumage_four_hier",
                      "icon": "mdi:stove",
                      "name": "Hier"
                    },
                    {
                      "entity": "sensor.temps_allumage_four_semaine",
                      "icon": "mdi:stove",
                      "name": "Semaine"
                    },
                    {
                      "entity": "sensor.temps_allumage_four_mois",
                      "icon": "mdi:stove",
                      "name": "Mois"
                    }
                  ],
                  "title": "Four",
                  "state_color": true
                }
              ],
              "visibility": [
                {
                  "condition": "user",
                  "users": [
                    "7b481de444a94b4b86a065bf4afa5cbb"
                  ]
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.em06_b1_power",
                  "secondary_info": "last-updated"
                },
                {
                  "entity": "sensor.consommation_reseau",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.consommation_reseau')) | float(0) == 0 %}\n    --paper-item-icon-color: #009900;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "sensor.cumulus_2",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.ecs') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_frigo_local_puissance",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.frigo') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.disjoncteur_3_puissance_2",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.climatisation') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.disjoncteur_4_puissance_2",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.clim_salon') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.lampe_salon",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.prise_salon') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_tv_puissance",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.tv') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_lave_linge_local_puissance",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lave_linge') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_lave_vaiselle_local_puissance",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lave_vaisselle') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_b2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.four') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_a2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.plaque') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.bidirectional_energy_meter_power_a",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.prises_etage') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_c2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lumieres_rdc') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}   \n"
                  }
                },
                {
                  "entity": "sensor.bidirectional_energy_meter_power_b",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lumieres_etage') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_zigbee_1_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.prise_zigbee_1_power')) | float(0) > 3 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.prise_5_local_puissance",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if int(states('sensor.prise_5_local_puissance')) | float(0) > 3 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                }
              ],
              "state_color": true
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.shelly_em0_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.shelly_em0_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.shelly_em1_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.shelly_em1_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_02_a2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.em06_02_a2_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_02_b2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.em06_02_b2_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_02_c2_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.em06_02_c2_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.em06_02_c1_power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.em06_02_c1_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.shelly_plus_1pm_01_switch_0_power",
                  "name": "Shelly 1PM-01 Power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.shelly_plus_1pm_01_switch_0_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "sensor.shelly_plus_1pm_02_switch_0_power",
                  "name": "Shelly 1PM-02 Power",
                  "secondary_info": "last-updated",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.shelly_plus_1pm_02_switch_0_power'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                }
              ],
              "state_color": true
            }
          ]
        },
        {
          "title": "Météo",
          "path": "meteo",
          "cards": [
            {
              "chart_type": "line",
              "period": "hour",
              "type": "statistics-graph",
              "entities": [
                "sensor.solcast_pv_forecast_puissance_en_1_heure",
                "sensor.em06_02_a1_power"
              ],
              "stat_types": [
                "mean"
              ],
              "days_to_show": 1
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "weather.talence"
                },
                {
                  "entity": "binary_sensor.rain_sensor_rain"
                }
              ]
            },
            {
              "type": "history-graph",
              "entities": [
                "sensor.rain_sensor_illuminance"
              ]
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "sensor.exterieur_temperature"
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "name": "Taux Solar (H-1)",
                      "entities": [
                        "input_number.taux_solar_h_1"
                      ],
                      "decimals": 1,
                      "height": 0,
                      "font_size": 80,
                      "align_state": "center",
                      "align_header": "center",
                      "show": {
                        "icon": false
                      }
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "name": "Taux Solar (H)",
                      "entities": [
                        "sensor.taux_solar_heure"
                      ],
                      "decimals": 1,
                      "height": 0,
                      "font_size": 80,
                      "align_state": "center",
                      "align_header": "center",
                      "show": {
                        "icon": false
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "name": "Taux Solar (J)",
                      "entities": [
                        "sensor.taux_solar_jour"
                      ],
                      "decimals": 1,
                      "height": 0,
                      "font_size": 80,
                      "align_state": "center",
                      "align_header": "center",
                      "show": {
                        "icon": false
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.energie_solar_j"
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "sensor.solcast_pv_forecast_previsions_pour_aujourd_hui",
                      "name": "Prévisions Solaire (j)"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "button",
                      "entity": "sensor.solcast_pv_forecast_previsions_pour_aujourd_hui",
                      "name": "J",
                      "show_state": true,
                      "show_icon": false
                    },
                    {
                      "type": "button",
                      "entity": "sensor.solcast_pv_forecast_previsions_pour_demain",
                      "name": "J + 1",
                      "show_state": true,
                      "show_icon": false
                    },
                    {
                      "type": "button",
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_3",
                      "name": "J + 2",
                      "show_state": true,
                      "show_icon": false
                    },
                    {
                      "type": "button",
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_4",
                      "name": "J+3",
                      "show_state": true,
                      "show_icon": false
                    },
                    {
                      "type": "button",
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_5",
                      "name": "J+4",
                      "show_state": true,
                      "show_icon": false
                    }
                  ]
                },
                {
                  "type": "custom:apexcharts-card",
                  "now": {
                    "show": true,
                    "label": "Now",
                    "color": "red"
                  },
                  "yaxis": [
                    {
                      "id": "value",
                      "apex_config": {
                        "forceNiceScale": true,
                        "max": "EVAL: function(max) { return max }\n",
                        "decimalsInFloat": 1,
                        "axisBorder": {
                          "show": false
                        },
                        "title": {
                          "text": "kWh",
                          "rotate": -90,
                          "offsetX": 4,
                          "offsetY": 0,
                          "style": {
                            "fontSize": "11px",
                            "font-weight": "normal"
                          }
                        }
                      }
                    }
                  ],
                  "apex_config": {
                    "chart": {
                      "height": 300,
                      "offsetY": 0,
                      "offsetX": -20,
                      "redrawOnParentResize": true
                    },
                    "legend": {
                      "show": false
                    },
                    "xaxis": {
                      "labels": {
                        "format": "dd/MM",
                        "style": {
                          "fontSize": "11px"
                        }
                      }
                    },
                    "fill": {
                      "type": "gradient",
                      "gradient": {
                        "type": "vertical",
                        "shadeIntensity": 0,
                        "inverseColors": false,
                        "opacityFrom": 0.9,
                        "opacityTo": 0.7,
                        "stops": [
                          1
                        ]
                      }
                    }
                  },
                  "span": {
                    "start": "day",
                    "offset": "+0h"
                  },
                  "graph_span": "5d",
                  "update_interval": "5min",
                  "header": {
                    "show": true
                  },
                  "series": [
                    {
                      "entity": "sensor.solcast_pv_forecast_previsions_pour_aujourd_hui",
                      "show": {
                        "in_header": true,
                        "legend_value": true
                      },
                      "name": "today",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 2,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });\n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_previsions_pour_demain",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "Demain",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });\n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_3",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "J+2",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });\n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_4",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "J+3",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });              \n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_5",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "J+4",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });\n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_6",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "J+5",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n });              \n"
                    },
                    {
                      "entity": "sensor.solcast_pv_forecast_prevision_jour_7",
                      "show": {
                        "in_header": false,
                        "legend_value": false
                      },
                      "name": "J+6",
                      "yaxis_id": "value",
                      "color": "#ffa600",
                      "opacity": 1,
                      "stroke_width": 1,
                      "float_precision": 3,
                      "unit": "kWh",
                      "group_by": {
                        "fill": "zero",
                        "duration": "60min",
                        "start_with_last": false,
                        "func": "last"
                      },
                      "data_generator": "return entity.attributes.detailedForecast.map((entry) => {\n   return [new Date(entry.period_start), entry.pv_estimate];\n});\n"
                    }
                  ]
                }
              ]
            },
            {
              "show_current": true,
              "show_forecast": true,
              "type": "weather-forecast",
              "entity": "weather.talence",
              "forecast_type": "hourly"
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.taux_solar_sensor"
              ],
              "stat_types": [
                "mean"
              ],
              "days_to_show": 30,
              "hide_legend": false
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.em06_02_a1_power",
                "sensor.solcast_pv_forecast_previsions_du_pic_aujourd_hui"
              ],
              "stat_types": [
                "max"
              ],
              "days_to_show": 10,
              "title": "Production Max"
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.energie_solar_j",
                "sensor.solcast_pv_forecast_previsions_pour_aujourd_hui"
              ],
              "title": "Énergie Produite",
              "days_to_show": 10,
              "stat_types": [
                "state"
              ]
            },
            {
              "type": "custom:plotly-graph",
              "hours_to_show": 12,
              "refresh_interval": 10,
              "layout": {
                "yaxis": {
                  "fixedrange": true
                }
              },
              "entities": [
                {
                  "entity": "sensor.rain_sensor_illuminance",
                  "yaxis": "y1",
                  "name": "Ensoleillement",
                  "line": {
                    "color": "orange"
                  }
                },
                {
                  "entity": "sensor.production_solaire",
                  "yaxis": "y2",
                  "name": "Puissance Solaire",
                  "line": {
                    "color": "red"
                  }
                },
                {
                  "entity": "sensor.solcast_pv_forecast_puissance_maintenant",
                  "yaxis": "y2",
                  "name": "Puissance Prévue",
                  "line": {
                    "color": "grey"
                  }
                }
              ]
            }
          ],
          "icon": "mdi:white-balance-sunny"
        },
        {
          "type": "sections",
          "max_columns": 4,
          "title": "Routeur",
          "path": "routeur",
          "icon": "mdi:sun-compass",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "statistic",
                  "entity": "sensor.cumulus_kwh",
                  "period": {
                    "calendar": {
                      "period": "day"
                    }
                  },
                  "stat_type": "change",
                  "grid_options": {
                    "columns": "full"
                  },
                  "name": "Energie du jour Cumulus",
                  "card_mod": {
                    "style": "ha-card {\n  {% if states('input_boolean.ecs') =='on'%}\n      --tile-color: green !important;\n  {% endif %}\n  text-align: center;\n}    \n      \n"
                  }
                },
                {
                  "type": "heading",
                  "heading_style": "subtitle"
                },
                {
                  "type": "tile",
                  "entity": "switch.disjoncteur_5_local_none",
                  "name": "Routeur Solaire",
                  "card_mod": {
                    "style": "ha-card {\n  {% if states('switch.disjoncteur_5_local_none') == 'on' %}\n      --tile-color: orange !important;\n  {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.disjoncteur_5_local_puissance",
                  "name": "Routeur Solaire",
                  "color": "grey",
                  "card_mod": {
                    "style": "ha-card {\n  {% if float(states('sensor.disjoncteur_5_local_puissance'),0) > 0 %}\n      --tile-color: orange !important;\n  {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "switch.cumulus"
                },
                {
                  "type": "tile",
                  "entity": "switch.shelly_plus_1pm_01_switch_0",
                  "name": "Mode Forcé",
                  "icon": "mdi:power",
                  "show_entity_picture": false,
                  "vertical": false,
                  "hide_state": true,
                  "color": "disabled",
                  "visibility": [
                    {
                      "condition": "state",
                      "entity": "switch.disjoncteur_5_local_none",
                      "state": "off"
                    }
                  ]
                },
                {
                  "type": "tile",
                  "entity": "switch.shelly_plus_1pm_01_switch_0",
                  "name": "Mode Forcé",
                  "icon": "mdi:power",
                  "show_entity_picture": false,
                  "vertical": false,
                  "hide_state": false,
                  "card_mod": {
                    "style": "ha-card {\n  {% if states('switch.shelly_plus_1pm_01_switch_0') =='on'%}\n      --tile-color: red !important;\n      --ha-card-background: lightpink;\n  {% endif %}\n}         \n"
                  },
                  "visibility": [
                    {
                      "condition": "state",
                      "entity": "switch.disjoncteur_5_local_none",
                      "state": "on"
                    }
                  ]
                },
                {
                  "type": "tile",
                  "entity": "sensor.production_solaire",
                  "card_mod": {
                    "style": "ha-card {\n  {% if float(states('sensor.production_solaire'),0) > 0 %}\n      --tile-color: green !important;\n  {% endif %}\n  \n  text-align: center;\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.surplus_production",
                  "card_mod": {
                    "style": "ha-card {\n  {% if float(states('sensor.surplus_production'),0) > 0 %}\n      --tile-color: green !important;\n  {% endif %}\n  text-align: center;\n}\n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.cumulus_2",
                  "name": "Puissance Cumulus",
                  "card_mod": {
                    "style": "ha-card {\n  {% if states('input_boolean.ecs') == 'on'%}\n      --tile-color: green !important;\n  {% endif %}\n  text-align: center;\n}    \n      \n"
                  },
                  "grid_options": {
                    "columns": 6,
                    "rows": 1
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.taux_de_chauffe_ecs",
                  "grid_options": {
                    "columns": 6,
                    "rows": 1
                  },
                  "card_mod": {
                    "style": "ha-card {\n  text-align: center;\n  {% if float(states('sensor.taux_de_chauffe_ecs'),0) >= 50 %}\n    --tile-color: green !important;\n  {% elif float(states('sensor.taux_de_chauffe_ecs'),0) >= 30 %}\n    --tile-color: orange !important;\n  {% else %}\n    --tile-color: red !important;\n  {% endif %}\n}    \n"
                  }
                },
                {
                  "chart_type": "line",
                  "period": "5minute",
                  "type": "statistics-graph",
                  "entities": [
                    "sensor.cumulus_2",
                    "sensor.production_solaire",
                    "sensor.surplus_production"
                  ],
                  "days_to_show": 0.5,
                  "stat_types": [
                    "mean"
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "input_boolean.ecs_chaud"
                    }
                  ],
                  "hours_to_show": 13
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.sonde_temperature_owon_temperature"
                    },
                    {
                      "entity": "input_number.tmax_ecs"
                    }
                  ],
                  "card_mod": {
                    "style": "ha-card {\n      --tile-color: red !important;\n}         \n"
                  },
                  "hours_to_show": 13,
                  "min_y_axis": 10,
                  "max_y_axis": 60,
                  "fit_y_data": false
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading_style": "subtitle"
                },
                {
                  "chart_type": "bar",
                  "period": "day",
                  "type": "statistics-graph",
                  "entities": [
                    "sensor.cumulus_kwh"
                  ],
                  "stat_types": [
                    "change"
                  ],
                  "days_to_show": 10
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "input_boolean.ecs_chaud",
                      "name": "ECS"
                    }
                  ],
                  "hours_to_show": 264
                },
                {
                  "chart_type": "bar",
                  "period": "hour",
                  "type": "statistics-graph",
                  "entities": [
                    "sensor.cumulus_kwh",
                    "sensor.energie_solar_j",
                    "sensor.surplus_production_kwh"
                  ],
                  "stat_types": [
                    "change"
                  ],
                  "days_to_show": 0.5
                }
              ]
            }
          ]
        },
        {
          "icon": "mdi:solar-panel",
          "path": "panneaux",
          "title": "Panneaux",
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.estar_centrale",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "sensor.estar_centrale_energy",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "sensor.estar_centrale_power",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "sensor.estar_maj_data"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "binary_sensor.estar_dcu",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "attribute",
                  "entity": "sensor.estar_dcu",
                  "attribute": "model_no"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "binary_sensor.estar_mo1",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "attribute",
                  "entity": "sensor.estar_mo1",
                  "attribute": "model_no"
                },
                {
                  "entity": "binary_sensor.estar_mo2",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "attribute",
                  "entity": "sensor.estar_mo2",
                  "attribute": "model_no"
                },
                {
                  "entity": "binary_sensor.estar_mo3",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "attribute",
                  "entity": "sensor.estar_mo3",
                  "attribute": "model_no"
                },
                {
                  "entity": "binary_sensor.estar_mo4",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "attribute",
                  "entity": "sensor.estar_mo4",
                  "attribute": "model_no"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "sensor.estar_url",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "sensor.estar_data",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "divider"
                },
                {
                  "entity": "sensor.estar_token",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "input_text.estar_token_input",
                  "secondary_info": "last-changed"
                },
                {
                  "entity": "input_text.estar_url",
                  "secondary_info": "last-changed"
                },
                {
                  "type": "divider"
                },
                {
                  "type": "custom:button-card",
                  "name": "Ouvrir le site WEB",
                  "tap_action": {
                    "action": "url",
                    "url_path": "https://monitor.estarpower.com/platform/login"
                  }
                },
                {
                  "type": "divider"
                },
                {
                  "type": "custom:button-card",
                  "name": "Relancer REST",
                  "icon": "mdi:backup-restore",
                  "size": "30px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "rest.reload"
                  }
                }
              ],
              "state_color": true
            }
          ]
        },
        {
          "title": "Automatisation",
          "path": "automatisation",
          "icon": "mdi:home-automation",
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_boolean.automatisation"
                },
                {
                  "entity": "input_boolean.mode_chauffage"
                },
                {
                  "entity": "input_boolean.mode_alarme"
                },
                {
                  "entity": "input_button.depart_en_vacances"
                },
                {
                  "entity": "input_button.retour_de_vacances"
                }
              ],
              "state_color": true
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "switch.cumulus",
                  "name": "Cumulus",
                  "icon": "mdi:water-boiler",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.ecs') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.disjoncteur_5_local_none",
                  "name": "Routeur Solaire",
                  "icon": "mdi:solar-power-variant-outline",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.disjoncteur_5_local_puissance'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.prise_frigo_local",
                  "icon": "mdi:fridge",
                  "name": "Frigo",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.frigo') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.prise_lave_vaisselle_local",
                  "name": "Lave Vaisselle",
                  "icon": "mdi:dishwasher",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lave_vaisselle') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.prise_lave_linge_local",
                  "name": "Lave Linge",
                  "icon": "mdi:washing-machine",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.lave_linge') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.prise_tv_local",
                  "name": "Télévision",
                  "icon": "mdi:television",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.tv') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.prise_5_local_none",
                  "name": "Prise 5",
                  "icon": "mdi:power-plug",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.prise_5_local_puissance'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.disjoncteur_sonnette_local_none",
                  "name": "Sonnette",
                  "card_mod": {
                    "style": ":host {\n  {% if float(states('sensor.disjoncteur_sonnette_local_puissance'),0) > 0 %}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  },
                  "icon": "mdi:doorbell-video"
                },
                {
                  "entity": "switch.shelly_em_switch"
                },
                {
                  "entity": "switch.disjoncteur_3_none",
                  "name": "Clim Chambres",
                  "icon": "mdi:thermometer-lines",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.climatisation') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                },
                {
                  "entity": "switch.disjoncteur_4_none",
                  "name": "Clim Salon",
                  "icon": "mdi:thermometer-lines",
                  "card_mod": {
                    "style": ":host {\n  {% if states('input_boolean.clim_salon') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                  }
                }
              ]
            },
            {
              "type": "custom:bubble-card",
              "card_type": "button",
              "entity": "automation.alerte_tp_link",
              "sub_button": [],
              "show_icon": true,
              "scrolling_effect": false,
              "show_state": false,
              "show_name": true,
              "show_attribute": true,
              "show_last_changed": false,
              "tap_action": {
                "action": "toggle"
              },
              "button_action": {
                "tap_action": {
                  "action": "more-info"
                }
              },
              "attribute": "last_triggered"
            },
            {
              "type": "markdown",
              "content": "||J|H|M||Name|\n|:--:|:-:|:----:|:----:|:--:|:----|\n{% for state in (states.automation\n   |selectattr('attributes.last_triggered')\n   |sort(attribute='attributes.last_triggered', reverse=true))\n   if (now() - state.attributes.last_triggered).total_seconds() < 10200 or state.attributes.current==1%}\n  {%- set t = now() - state.attributes.last_triggered -%}\n  {%- set on = state.attributes.current -%}\n  {%- set days = t.days if t.days > 0 else '&nbsp;' -%}\n  {%- set hrs = t.seconds//3600 %}\n  {%- set hrs = hrs if hrs > 0 else '&nbsp;' -%}  \n  |{{'<b>ON' if state.attributes.current==1}}|{{'<b>' if state.attributes.current==1}}{{days}}| &nbsp;{{'<b>' if state.attributes.current==1}}{{hrs}}&nbsp;&nbsp;|&nbsp;{{'<b>' if state.attributes.current==1}}{{(t.seconds//60)%60}}&nbsp;||{{'<b>' if state.attributes.current==1}}{{state.name}}|\n{% endfor %}"
            }
          ]
        },
        {
          "title": "Température/Clim",
          "path": "temperature-clim",
          "type": "sections",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Lisa",
                      "entity": "sensor.chambre_lisa_temperature"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Lisa",
                      "entity": "sensor.meter_plus_938f"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.clim_lisa",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "entity": "sensor.chambre_leo_temperature",
                      "name": "Léo"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "entity": "sensor.meter_plus_16c6",
                      "name": "Léo"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.clim_leo",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Entrée",
                      "entity": "sensor.entree_temperature"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Entrée",
                      "entity": "sensor.meter_plus_6b44"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.clim_entree",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Parents",
                      "entity": "sensor.chambre_parents_temperature"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Parents",
                      "entity": "sensor.meter_plus_d2cd"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.clim_parents",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:button-card",
                      "name": "Relancer Switchbot",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "label_id": "switchbot"
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer Gree Climate",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "label_id": "clim"
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer Daikin",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "label_id": "daikin"
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Salon",
                      "entity": "sensor.salon_temperature"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Salon",
                      "entity": "sensor.meter_plus_e778"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.salon",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Salle à manger",
                      "entity": "sensor.salon_temperature"
                    },
                    {
                      "graph": "line",
                      "type": "sensor",
                      "detail": 2,
                      "hours_to_show": 24,
                      "name": "Salle à manger",
                      "entity": "sensor.meter_plus_e778"
                    },
                    {
                      "features": [
                        {
                          "type": "target-temperature"
                        }
                      ],
                      "type": "tile",
                      "entity": "climate.salle_a_manger",
                      "show_entity_picture": false,
                      "vertical": true,
                      "hide_state": false,
                      "icon_tap_action": {
                        "action": "toggle"
                      },
                      "icon": "mdi:air-conditioner",
                      "state_content": [
                        "current_temperature",
                        "last_changed"
                      ]
                    }
                  ]
                }
              ],
              "column_span": 1
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "name": "Temperature Clim Lisa",
                  "entities": [
                    {
                      "entity": "sensor.chambre_lisa_temperature",
                      "color": "green",
                      "line_width": 1,
                      "name": "Thermomètre"
                    },
                    {
                      "entity": "climate.clim_lisa",
                      "attribute": "current_temperature",
                      "color": "lightblue",
                      "line_width": 1,
                      "name": "Valeur Clim"
                    },
                    {
                      "entity": "input_number.seuil_temperature_chambres",
                      "color": "red",
                      "show_fill": false,
                      "name": "Référence"
                    }
                  ],
                  "line_width": 1,
                  "font_size": 75,
                  "hours_to_show": 12,
                  "points_per_hour": 12,
                  "height": 200
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Temperature Clim Léo",
                  "entities": [
                    {
                      "entity": "sensor.chambre_leo_temperature",
                      "color": "green",
                      "line_width": 1,
                      "name": "Thermomètre"
                    },
                    {
                      "entity": "climate.clim_leo",
                      "attribute": "current_temperature",
                      "color": "lightblue",
                      "line_width": 1,
                      "name": "Valeur Clim"
                    },
                    {
                      "entity": "input_number.seuil_temperature_chambres",
                      "color": "red",
                      "show_fill": false,
                      "name": "Référence"
                    }
                  ],
                  "line_width": 1,
                  "font_size": 75,
                  "hours_to_show": 12,
                  "points_per_hour": 12,
                  "height": 200
                },
                {
                  "type": "custom:mini-graph-card",
                  "name": "Temperature Clim Entree",
                  "entities": [
                    {
                      "entity": "sensor.entree_temperature",
                      "color": "green",
                      "line_width": 1,
                      "name": "Thermomètre"
                    },
                    {
                      "entity": "climate.clim_entree",
                      "attribute": "current_temperature",
                      "color": "lightblue",
                      "line_width": 1,
                      "name": "Valeur Clim"
                    },
                    {
                      "entity": "input_number.seuil_temperature_entree",
                      "color": "red",
                      "show_fill": false,
                      "name": "Référence"
                    }
                  ],
                  "line_width": 1,
                  "font_size": 75,
                  "hours_to_show": 12,
                  "points_per_hour": 12,
                  "height": 200
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "graph": "line",
                          "type": "sensor",
                          "detail": 2,
                          "hours_to_show": 24,
                          "entity": "sensor.meter_plus_e778"
                        },
                        {
                          "graph": "line",
                          "type": "sensor",
                          "detail": 2,
                          "hours_to_show": 24,
                          "entity": "sensor.indoor_outdoor_meter_6a71"
                        },
                        {
                          "graph": "line",
                          "type": "sensor",
                          "detail": 2,
                          "hours_to_show": 24,
                          "entity": "sensor.indoor_outdoor_meter_510d"
                        }
                      ]
                    }
                  ]
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 2,
                  "entity": "sensor.salon_temperature",
                  "hours_to_show": 24,
                  "name": "Salon"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 2,
                  "hours_to_show": 24,
                  "name": "Extérieur",
                  "entity": "sensor.exterieur_temperature"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 2,
                  "entity": "sensor.awtrix_2e487c_temperature",
                  "hours_to_show": 24,
                  "name": "Garage"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 2,
                  "hours_to_show": 24,
                  "name": "Cuisine",
                  "entity": "sensor.capteur_frigo_temperature"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 2,
                  "hours_to_show": 24,
                  "name": "Frigo",
                  "entity": "sensor.thermometre_frigo_temperature"
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:layout-card",
                  "layout_type": "masonry",
                  "layout": {},
                  "cards": [
                    {
                      "type": "entities",
                      "entities": [
                        "climate.clim_leo",
                        "sensor.chambre_leo_temperature",
                        "climate.clim_lisa",
                        "sensor.chambre_lisa_temperature",
                        "climate.clim_entree",
                        "sensor.entree_temperature",
                        "climate.clim_parents",
                        "sensor.chambre_parents_temperature"
                      ]
                    }
                  ]
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 1,
                  "entity": "sensor.chambre_lisa_humidite"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 1,
                  "entity": "sensor.chambre_leo_humidite"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 1,
                  "entity": "sensor.chambre_parents_humidite"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 1,
                  "entity": "sensor.salon_humidite"
                },
                {
                  "graph": "line",
                  "type": "sensor",
                  "detail": 1,
                  "entity": "sensor.entree_humidite"
                }
              ]
            }
          ],
          "max_columns": 2,
          "icon": "mdi:fan-auto",
          "cards": []
        },
        {
          "type": "sections",
          "max_columns": 4,
          "title": "Chauffage/Clim",
          "path": "chauffage-clim",
          "icon": "mdi:thermometer-auto",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading_style": "title"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_boolean.mode_chauffage"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "schedule.calendrier_chauffage_chambres"
                    },
                    {
                      "type": "attribute",
                      "entity": "schedule.calendrier_chauffage_chambres",
                      "attribute": "next_event",
                      "icon": "mdi:reload",
                      "name": "Activation"
                    },
                    {
                      "entity": "schedule.calendrier_chauffage_entree"
                    },
                    {
                      "type": "attribute",
                      "entity": "schedule.calendrier_chauffage_entree",
                      "attribute": "next_event",
                      "icon": "mdi:reload",
                      "name": "Activation"
                    },
                    {
                      "entity": "schedule.calendrier_chauffage_salon"
                    },
                    {
                      "type": "attribute",
                      "entity": "schedule.calendrier_chauffage_salon",
                      "attribute": "next_event",
                      "icon": "mdi:reload",
                      "name": "Activation"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "switch.disjoncteur_3_none",
                      "name": "Clim Chambres",
                      "icon": "mdi:thermometer-lines"
                    },
                    {
                      "entity": "switch.disjoncteur_4_none",
                      "name": "Clim Salon",
                      "icon": "mdi:thermometer-lines"
                    }
                  ],
                  "state_color": true
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_number.consigne_chauffage_chambres"
                    },
                    {
                      "entity": "input_number.seuil_temperature_chambres"
                    },
                    {
                      "entity": "input_number.consigne_chauffage_entree"
                    },
                    {
                      "entity": "input_number.seuil_temperature_entree"
                    }
                  ],
                  "visibility": [
                    {
                      "condition": "state",
                      "entity": "input_boolean.mode_chauffage",
                      "state": "on"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "sensor.em06_b1_power",
                      "secondary_info": "last-updated"
                    },
                    {
                      "entity": "sensor.consommation_reseau",
                      "secondary_info": "last-updated",
                      "card_mod": {
                        "style": ":host {\n  {% if int(states('sensor.consommation_reseau')) | float(0) == 0 %}\n    --paper-item-icon-color: #009900;\n  {% endif %}\n}\n"
                      }
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_3_puissance_2",
                      "secondary_info": "last-updated",
                      "card_mod": {
                        "style": ":host {\n  {% if states('input_boolean.climatisation') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                      }
                    },
                    {
                      "entity": "sensor.disjoncteur_4_puissance_2",
                      "secondary_info": "last-updated",
                      "card_mod": {
                        "style": ":host {\n  {% if states('input_boolean.clim_salon') =='on'%}\n    --paper-item-icon-color: #fcb944;\n  {% endif %}\n}\n"
                      }
                    }
                  ],
                  "state_color": true
                }
              ]
            }
          ]
        },
        {
          "type": "sections",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "tile",
                  "entity": "sensor.system_monitor_adresse_ipv4_enp0s1"
                },
                {
                  "type": "tile",
                  "entity": "sensor.myip"
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.system_monitor_adresse_ipv4_enp0s1"
                    },
                    {
                      "entity": "sensor.myip"
                    }
                  ],
                  "title": "IP Locale",
                  "hours_to_show": 4
                },
                {
                  "graph": "none",
                  "type": "sensor",
                  "entity": "sensor.m5_vitesse_de_telechargement",
                  "detail": 1,
                  "name": "Download"
                },
                {
                  "graph": "none",
                  "type": "sensor",
                  "entity": "sensor.m5_vitesse_de_telechargement_montant",
                  "detail": 1,
                  "name": "Upload"
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.m5_vitesse_de_telechargement"
                    },
                    {
                      "entity": "sensor.m5_vitesse_de_telechargement_montant"
                    }
                  ],
                  "hours_to_show": 24
                },
                {
                  "type": "tile",
                  "vertical": false,
                  "entity": "sensor.uptime",
                  "layout_options": {
                    "grid_columns": 4,
                    "grid_rows": 1
                  }
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "heading",
                          "icon": "mdi:server",
                          "heading": "PROXMOX",
                          "heading_style": "subtitle",
                          "grid_options": {
                            "columns": 6,
                            "rows": "auto"
                          }
                        },
                        {
                          "type": "heading",
                          "icon": "mdi:home-assistant",
                          "heading": "HOME ASSISTANT",
                          "heading_style": "subtitle",
                          "grid_options": {
                            "columns": 6,
                            "rows": "auto"
                          }
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "entities",
                          "entities": [
                            {
                              "entity": "sensor.node_host_001_cpu_used",
                              "name": "CPU"
                            },
                            {
                              "entity": "sensor.node_host_001_memory_used_percentage",
                              "name": "RAM"
                            },
                            {
                              "entity": "sensor.node_host_001_disk_used_percentage",
                              "name": "DISK"
                            }
                          ]
                        },
                        {
                          "type": "entities",
                          "entities": [
                            {
                              "entity": "sensor.system_monitor_utilisation_du_processeur",
                              "name": "CPU",
                              "icon-color": "green",
                              "card_mod": {
                                "style": ":host {\n  color: green !important;\n  }\n"
                              }
                            },
                            {
                              "entity": "sensor.system_monitor_utilisation_de_la_memoire",
                              "name": "RAM",
                              "card_mod": {
                                "style": "ha-card {\n    {% set level = float(states('sensor.system_monitor_utilisation_de_la_memoire')) %}\n    {% if level >= 50 %}\n      --tile-color: red !important;\n    {% elif level >= 30 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                              }
                            },
                            {
                              "entity": "sensor.system_monitor_utilisation_du_disque",
                              "name": "DISK",
                              "icon_color": "green",
                              "card_mod": {
                                "style": ":host {\n  --card-mod-icon-color: red !important;\n  color: green !important;\n  }\n"
                              }
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "horizontal-stack",
                      "cards": [
                        {
                          "type": "custom:mushroom-template-card",
                          "primary": "",
                          "secondary": "CPU : {{states('sensor.node_host_001_cpu_used')| round(1)}} %",
                          "icon": "mdi:cpu-64-bit",
                          "icon_color": "{% set level = float(states('sensor.node_host_001_cpu_used')) %}\n{% if level >= 10 %}\n  red\n{% elif level >= 5 %}\n  orange\n{% else %}\n  green\n{% endif %}\n"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "tile",
                  "entity": "sensor.node_host_001_cpu_used",
                  "name": "Proxmox CPU",
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = float(states('sensor.node_host_001_cpu_used')) %}\n    {% if level >= 10 %}\n      --tile-color: red !important;\n    {% elif level > 5 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.system_monitor_utilisation_du_processeur",
                  "name": "HA CPU",
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = float(states('sensor.system_monitor_utilisation_du_processeur')) %}\n    {% if level >= 10 %}\n      --tile-color: red !important;\n    {% elif level > 5 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.node_host_001_memory_used_percentage",
                  "name": "Proxmox Mem",
                  "show_entity_picture": false,
                  "vertical": false,
                  "hide_state": false,
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = int(states('sensor.system_monitor_utilisation_de_la_memoire')) %}\n    {% if level >= 50 %}\n      --tile-color: red !important;\n    {% elif level >= 30 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.system_monitor_utilisation_de_la_memoire",
                  "name": "HA Mem",
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = int(states('sensor.system_monitor_utilisation_de_la_memoire')) %}\n    {% if level >= 50 %}\n      --tile-color: red !important;\n    {% elif level >= 30 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "name": "Proxmox Disk",
                  "entity": "sensor.node_host_001_disk_used_percentage",
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = int(states('sensor.system_monitor_utilisation_du_disque')) %}\n    {% if level > 80 %}\n      --tile-color: red !important;\n    {% elif level > 50 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.system_monitor_utilisation_du_disque",
                  "name": "HA Disk",
                  "card_mod": {
                    "style": "ha-card {\n    {% set level = int(states('sensor.system_monitor_utilisation_du_disque')) %}\n    {% if level > 80 %}\n      --tile-color: red !important;\n    {% elif level > 50 %}\n      --tile-color: orange !important;\n    {% else %}\n      --tile-color: green !important;\n    {% endif %}\n}         \n"
                  }
                },
                {
                  "type": "tile",
                  "entity": "sensor.home_assistant_v2_db_taille",
                  "name": "Home Assistant"
                },
                {
                  "type": "tile",
                  "entity": "sensor.database"
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.uptime"
                    }
                  ],
                  "hours_to_show": 24
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.system_monitor_charge_5m"
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.system_monitor_utilisation_de_la_memoire"
                    }
                  ],
                  "min_y_axis": 0
                },
                {
                  "chart_type": "line",
                  "period": "5minute",
                  "type": "statistics-graph",
                  "entities": [
                    "sensor.mesureur_n1_puissance_b"
                  ],
                  "stat_types": [
                    "mean"
                  ],
                  "days_to_show": 0.95
                },
                {
                  "type": "custom:stack-in-card",
                  "title": "Backup Google Drive",
                  "cards": [
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "binary_sensor.backups_stale",
                          "name": "Backup Status",
                          "card_mod": {
                            "style": ":host {\n    {% set level = states('binary_sensor.backups_stale') %}\n    {% if level == \"off\" %}\n      --card-mod-icon-color: green;\n    {% else %}\n      --card-mod-icon-color: red;\n    {% endif %}\n}         \n"
                          }
                        },
                        {
                          "attribute": "last_backup",
                          "entity": "sensor.backup_state",
                          "icon": "mdi:file-clock-outline",
                          "name": "Last Backup",
                          "type": "attribute"
                        },
                        {
                          "attribute": "size_in_home_assistant",
                          "entity": "sensor.backup_state",
                          "icon": "mdi:harddisk",
                          "name": "Taille Home Assistant",
                          "type": "attribute"
                        },
                        {
                          "attribute": "size_in_google_drive",
                          "entity": "sensor.backup_state",
                          "icon": "mdi:folder-google-drive",
                          "name": "Taille Drive",
                          "type": "attribute"
                        },
                        {
                          "attribute": "free_space_in_google_drive",
                          "entity": "sensor.backup_state",
                          "icon": "mdi:google-drive",
                          "name": "Espace Drive",
                          "type": "attribute"
                        }
                      ],
                      "show_header_toggle": false
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Lancer un Backup Google",
                      "icon": "mdi:backup-restore",
                      "size": "40px",
                      "tap_action": {
                        "action": "call-service",
                        "service": "hassio.addon_stdin",
                        "service_data": {
                          "addon": null,
                          "input": "trigger"
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Lancer un Backup local",
                      "icon": "mdi:backup-restore",
                      "size": "40px",
                      "action": "toggle",
                      "entity": "input_button.backup"
                    }
                  ]
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading": "Nouvelle section"
                },
                {
                  "type": "custom:flex-table-card",
                  "grid_options": {
                    "columns": "full"
                  },
                  "clickable": true,
                  "sort_unmodified": false,
                  "display_footer": true,
                  "strict": false,
                  "sort_by": [
                    "test+",
                    "name+"
                  ],
                  "entities": {
                    "include": "device_tracker.*",
                    "exclude": "FSC"
                  },
                  "css": {
                    "tfoot th": "text-align: right;background-color: midnightblue;",
                    "#tfootcol4": "background-color: red",
                    "tfoot *": "border-style: dotted none solid none;"
                  },
                  "columns": [
                    {
                      "data": "state",
                      "name": "State",
                      "align": "center",
                      "modify": "if (x=='home') {\"<ha-icon icon=\\\"mdi:lan-connect\\\" style=\\\"color:green\\\"></ha-icon>\" } else if (x=='not_home') {\"<ha-icon icon=\\\"mdi:lan-disconnect\\\" style=\\\"color:orange\\\"></ha-icon>\" } else {\"<ha-icon icon=\\\"mdi:lan-disconnect\\\" style=\\\"color:grey\\\"></ha-icon>\" }"
                    },
                    {
                      "name": "Name",
                      "data": "name"
                    },
                    {
                      "name": "IP",
                      "data": "ip",
                      "modify": "if (x) {if(x.length == 0){''} else {x}} else {'2'}"
                    },
                    {
                      "name": "IP",
                      "data": "ip",
                      "modify": "if (x) {if(x.length == 0){'192.168.254.254'} else {x}} else {''}",
                      "id": "test",
                      "hidden": true
                    },
                    {
                      "name": "MAC",
                      "data": "mac",
                      "modify": "if (x) {if(x.length == 0){''} else {x}} else {''}"
                    }
                  ]
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:layout-card",
                  "layout_type": "custom:grid-layout",
                  "column_num": 2,
                  "max_columns": 2,
                  "column_width": [
                    "35%",
                    "65%"
                  ],
                  "cards": [
                    {
                      "type": "custom:config-template-card",
                      "variables": [
                        "states['update.home_assistant_core_update'].attributes.installed_version",
                        "Math.floor(parseFloat(states['sensor.disk_host_001_kpart512gbc2dvt_dev_nvme0n1_size'].state))",
                        "parseFloat(states['sensor.node_host_001_disk_used'].state).toFixed(2)"
                      ],
                      "entities": [
                        "update.home_assistant_core_update",
                        "sensor.disk_host_001_kpart512gbc2dvt_dev_nvme0n1_size",
                        "sensor.node_host_001_disk_used_percentage"
                      ],
                      "card": {
                        "type": "custom:hui-entities-card",
                        "show_header_toggle": "off",
                        "style": "ha-card { border-radius: 10px; }\n",
                        "entities": [
                          {
                            "type": "section",
                            "label": "${ 'NUC N97 - Proxmox 8.3.1 - Home Assistant ' + vars[0] }"
                          },
                          {
                            "type": "custom:hui-vertical-stack-card",
                            "cards": [
                              {
                                "type": "horizontal-stack",
                                "cards": [
                                  {
                                    "type": "picture",
                                    "style": "ha-card { \n    --paper-card-background-color: 'rgba(255, 0, 0, 0.0)';\n    --ha-card-background: \"rgba(255, 255, 255, 0.0)\";\n    --ha-card-box-shadow: 'none';\n}\n",
                                    "image": "/local/images/NUC.png"
                                  },
                                  {
                                    "type": "custom:button-card",
                                    "layout": "icon_name_state2nd",
                                    "show_icon": true,
                                    "show_state": true,
                                    "show_name": true,
                                    "styles": {
                                      "grid": [
                                        {
                                          "grid-template-columns": "30px auto"
                                        }
                                      ],
                                      "icon": [
                                        {
                                          "padding": "0px 0px"
                                        },
                                        {
                                          "width": "40px"
                                        }
                                      ],
                                      "card": [
                                        {
                                          "--ha-card-background": "rgba(0, 0, 0, 0.0)"
                                        },
                                        {
                                          "--ha-card-box-shadow": "none"
                                        }
                                      ],
                                      "state": [
                                        {
                                          "padding": "4px 20px"
                                        },
                                        {
                                          "justify-self": "start"
                                        },
                                        {
                                          "font-family": "Roboto, sans-serif"
                                        },
                                        {
                                          "font-size": "13px"
                                        }
                                      ],
                                      "name": [
                                        {
                                          "padding": "0px 20px"
                                        },
                                        {
                                          "justify-self": "start"
                                        },
                                        {
                                          "color": "var(--secondary-text-color)"
                                        }
                                      ]
                                    },
                                    "entity": "sensor.node_host_001_last_boot",
                                    "name": "Uptime",
                                    "icon": "mdi:clock-outline"
                                  }
                                ]
                              },
                              {
                                "type": "custom:bar-card",
                                "title_position": "inside",
                                "show_icon": true,
                                "align": "split",
                                "columns": 1,
                                "max": 100,
                                "unit_of_measurement": "%",
                                "severity": [
                                  {
                                    "value": 50,
                                    "color": "#3498db"
                                  },
                                  {
                                    "value": 75,
                                    "color": "#f39c12"
                                  },
                                  {
                                    "value": 100,
                                    "color": "#e45e65",
                                    "style": "ha-card { \n  --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';\n  --ha-card-background: \"rgba(0, 0, 0, 0.0)\";\n  --ha-card-box-shadow: 'none';\n}\n"
                                  }
                                ],
                                "entity": "sensor.node_host_001_disk_used_percentage",
                                "title": "${ 'Disk ( ' + vars[2] + ' Go / ' + vars[1] + ' Go )' }"
                              },
                              {
                                "type": "horizontal-stack",
                                "cards": [
                                  {
                                    "type": "custom:bar-card",
                                    "title_position": "inside",
                                    "show_icon": true,
                                    "align": "split",
                                    "columns": 1,
                                    "max": 100,
                                    "unit_of_measurement": "%",
                                    "severity": [
                                      {
                                        "value": 20,
                                        "color": "#3498db"
                                      },
                                      {
                                        "value": 35,
                                        "color": "#f39c12"
                                      },
                                      {
                                        "value": 50,
                                        "color": "#e45e65"
                                      }
                                    ],
                                    "style": "ha-card { \n  --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';\n  --ha-card-background: \"rgba(0, 0, 0, 0.0)\";\n  --ha-card-box-shadow: 'none';\n}\n",
                                    "entity": "sensor.node_host_001_memory_used_percentage",
                                    "title": "RAM"
                                  },
                                  {
                                    "type": "custom:bar-card",
                                    "title_position": "inside",
                                    "show_icon": true,
                                    "align": "split",
                                    "columns": 1,
                                    "max": 100,
                                    "unit_of_measurement": "%",
                                    "severity": [
                                      {
                                        "value": 50,
                                        "color": "#3498db"
                                      },
                                      {
                                        "value": 75,
                                        "color": "#f39c12"
                                      },
                                      {
                                        "value": 100,
                                        "color": "#e45e65"
                                      }
                                    ],
                                    "style": "ha-card { \n  --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';\n  --ha-card-background: \"rgba(0, 0, 0, 0.0)\";\n  --ha-card-box-shadow: 'none';\n}\n",
                                    "entity": "sensor.node_host_001_cpu_used",
                                    "title": "CPU"
                                  }
                                ]
                              },
                              {
                                "type": "custom:mini-graph-card",
                                "height": 20,
                                "line_width": 1,
                                "font_size": 70,
                                "hours_to_show": 24,
                                "points_per_hour": 12,
                                "show": {
                                  "extrema": true,
                                  "fill": true
                                },
                                "style": "ha-card { \n  --ha-card-background: \"rgba(0, 0, 0, 0.0)\";\n  --ha-card-box-shadow: 'none';\n  border-radius: 5px;\n}\n",
                                "entities": [
                                  "sensor.disk_host_001_kpart512gbc2dvt_dev_nvme0n1_temperature"
                                ],
                                "name": "Temperature",
                                "color_thresholds": [
                                  {
                                    "value": 40,
                                    "color": "#3498db"
                                  },
                                  {
                                    "value": 50,
                                    "color": "#f39c12"
                                  },
                                  {
                                    "value": 60,
                                    "color": "#E45E65"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    }
                  ],
                  "grid_options": {
                    "columns": 48,
                    "rows": 8
                  }
                }
              ],
              "column_span": 4
            }
          ],
          "max_columns": 4,
          "title": "Supervision",
          "cards": [],
          "icon": "mdi:memory"
        },
        {
          "background": {
            "image": "/api/image/serve/0643e33258f2b97be2e5ea0596f0e129/original"
          },
          "cards": [],
          "icon": "mdi:alert-circle-check-outline",
          "type": "sections",
          "max_columns": 3,
          "dense_section_placement": false,
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.em06_01",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.em06_b1_voltage",
                      "secondary_info": "last-updated",
                      "name": "Tension EM06-01"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.em06_02",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.em06_02_b1_voltage",
                      "secondary_info": "last-updated",
                      "name": "Tension EM06-02"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer REFOSS",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "sensor.em06_b1_voltage"
                        }
                      }
                    },
                    {
                      "type": "divider"
                    }
                  ],
                  "state_color": true,
                  "title": "REFOSS"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.shelly_pro_em",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.shelly_em0_voltage",
                      "secondary_info": "last-updated",
                      "name": "Tension EM"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.shelly_plus_1pm_01",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.shelly_plus_1pm_01_switch_0_voltage",
                      "secondary_info": "last-updated",
                      "name": "Tension PM1"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.shelly_plus_1pm_02",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.shelly_plus_1pm_02_switch_0_voltage",
                      "secondary_info": "last-updated",
                      "name": "Tension PM1"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer SHELLY",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": [
                            "sensor.shelly_em0_voltage",
                            "sensor.shelly_plus_1pm_01_switch_0_voltage",
                            "sensor.shelly_plus_1pm_02_switch_0_voltage"
                          ]
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "SHELLY"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.192_168_1_138",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.tp_link_router_cpu_used",
                      "secondary_info": "last-updated",
                      "name": "CPU"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.m5_vitesse_de_telechargement",
                      "secondary_info": "last-updated",
                      "name": "Download"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.m5_vitesse_de_telechargement_montant",
                      "secondary_info": "last-updated",
                      "name": "Upload"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer TPLink",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "sensor.tp_link_router_cpu_used"
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer UPNP",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "sensor.m5_vitesse_de_telechargement"
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "DECO M5"
                }
              ],
              "column_span": 1
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.disjoncteur_1",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_cumulus_tension",
                      "secondary_info": "last-updated",
                      "name": "CLOUD",
                      "icon": "mdi:cloud-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.cumulus_3",
                      "secondary_info": "last-updated",
                      "name": "LOCAL",
                      "icon": "mdi:network-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.disjoncteur_2",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_frigo_tension",
                      "secondary_info": "last-updated",
                      "name": "CLOUD",
                      "icon": "mdi:cloud-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_sonnette_local_tension",
                      "secondary_info": "last-updated",
                      "name": "LOCAL",
                      "icon": "mdi:network-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.disjoncteur_3",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_3_tension",
                      "secondary_info": "last-updated",
                      "name": "CLOUD",
                      "icon": "mdi:cloud-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_3_tension_2",
                      "name": "LOCAL",
                      "icon": "mdi:network-outline",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.disjoncteur_4",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_4_tension",
                      "secondary_info": "last-updated",
                      "name": "CLOUD",
                      "icon": "mdi:cloud-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_4_tension_2",
                      "name": "LOCAL",
                      "icon": "mdi:network-outline",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.disjoncteur_5",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.wifi_smart_meter_switch_3_tension",
                      "secondary_info": "last-updated",
                      "name": "CLOUD",
                      "icon": "mdi:cloud-outline"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.disjoncteur_5_local_tension",
                      "name": "LOCAL",
                      "icon": "mdi:network-outline",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer CLOUD",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "sensor.disjoncteur_4_tension"
                        }
                      }
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer LOCAL",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "label_id": "tuya_local"
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "TUYA"
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.ecojoko",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.ecojoko"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.ecojoko_consommation_temps_reel",
                      "secondary_info": "last-updated",
                      "name": "EcoJoko"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer ECOJOKO",
                      "icon": "mdi:backup-restore",
                      "size": "30px",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "sensor.ecojoko_consommation_temps_reel"
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "ECOJOKO"
                },
                {
                  "type": "markdown",
                  "content": "Ecojoko Consommation tempsreel : {% set seconds_difference = (as_timestamp(now()) - as_timestamp(states.sensor.ecojoko_consommation_temps_reel.last_updated)) %} {{seconds_difference | int}} sec\n"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.tahoma_switch",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "switch.lumiere_salon",
                      "secondary_info": "last-updated",
                      "name": "Tahoma Switch"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer TAHOMA",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "entity_id": "switch.lumiere_salon"
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "TAHOMA"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "device_tracker.switchbot_hubmini",
                      "secondary_info": "last-updated"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "entity": "sensor.chambre_leo_temperature",
                      "secondary_info": "last-updated",
                      "name": "Chambre Léo"
                    },
                    {
                      "entity": "sensor.chambre_lisa_temperature",
                      "secondary_info": "last-updated",
                      "name": "Chambre Lisa"
                    },
                    {
                      "entity": "sensor.chambre_parents_temperature",
                      "secondary_info": "last-updated",
                      "name": "Chambre Parents"
                    },
                    {
                      "entity": "sensor.entree_temperature",
                      "secondary_info": "last-updated",
                      "name": "Entrée"
                    },
                    {
                      "entity": "sensor.salon_temperature",
                      "secondary_info": "last-updated",
                      "name": "Salon"
                    },
                    {
                      "entity": "sensor.exterieur_temperature",
                      "secondary_info": "last-updated",
                      "name": "Exterieur"
                    },
                    {
                      "entity": "sensor.thermometre_frigo_temperature",
                      "secondary_info": "last-updated",
                      "name": "Frigo"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "custom:button-card",
                      "name": "Relancer SWITCHBOT",
                      "tap_action": {
                        "action": "call-service",
                        "service": "homeassistant.reload_config_entry",
                        "data": {
                          "label_id": "switchbot"
                        }
                      }
                    }
                  ],
                  "state_color": true,
                  "title": "SwitchBot"
                }
              ]
            }
          ]
        },
        {
          "title": "HP/HC",
          "path": "hp-hc",
          "icon": "mdi:toggle-switch-variant-off",
          "cards": [
            {
              "type": "glance",
              "entities": [
                {
                  "entity": "sensor.taux_hc_jour"
                },
                {
                  "entity": "input_number.taux_hc_j_1"
                },
                {
                  "entity": "sensor.taux_hc_semaine"
                },
                {
                  "entity": "sensor.taux_hc_mois"
                },
                {
                  "entity": "sensor.taux_hc_annee"
                }
              ]
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.taux_hc_stat"
              ],
              "stat_types": [
                "mean"
              ],
              "days_to_show": 10,
              "hide_legend": false
            },
            {
              "chart_type": "bar",
              "period": "hour",
              "type": "statistics-graph",
              "entities": [
                "sensor.energie_consommee_j_hp",
                "sensor.energie_consommee_j_hc"
              ],
              "stat_types": [
                "state"
              ],
              "days_to_show": 2
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "sensor.taux_hc_sensor"
                }
              ],
              "hours_to_show": 200
            },
            {
              "chart_type": "bar",
              "period": "month",
              "type": "statistics-graph",
              "entities": [
                "sensor.taux_hc_stat"
              ],
              "stat_types": [
                "mean"
              ],
              "days_to_show": 365,
              "hide_legend": false
            }
          ],
          "badges": []
        },
        {
          "title": "Statistiques",
          "path": "statistiques",
          "icon": "mdi:chart-timeline-variant-shimmer",
          "cards": [
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.duree_cycle_frigo"
              ],
              "stat_types": [
                "mean"
              ]
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.cycle_frigo"
              ],
              "stat_types": [
                "max"
              ],
              "logarithmic_scale": false,
              "days_to_show": 10
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "sensor.duree_cycle_frigo_sensor"
                }
              ],
              "hours_to_show": 24
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "input_number.cycles_frigo"
                }
              ]
            },
            {
              "type": "statistic",
              "entity": "sensor.duree_cycle_frigo",
              "period": {
                "calendar": {
                  "period": "week"
                }
              },
              "stat_type": "mean",
              "name": "Durée cycle Frigo (s)"
            },
            {
              "type": "statistic",
              "entity": "sensor.cycle_frigo",
              "period": {
                "calendar": {
                  "period": "week"
                }
              },
              "stat_type": "mean",
              "name": "Nb Cycles Frigo moyen (semaine)"
            },
            {
              "chart_type": "bar",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.temps_allumage_frigo_today"
              ],
              "stat_types": [
                "max"
              ],
              "days_to_show": 30
            },
            {
              "type": "statistic",
              "entity": "sensor.temps_allumage_frigo_today",
              "period": {
                "calendar": {
                  "period": "week"
                }
              },
              "stat_type": "mean",
              "name": "Temps frigo moyen (semaine)"
            },
            {
              "chart_type": "line",
              "period": "day",
              "type": "statistics-graph",
              "entities": [
                "sensor.thermometre_frigo_temperature"
              ],
              "days_to_show": 30,
              "stat_types": [
                "mean"
              ]
            }
          ]
        },
        {
          "title": "VOLETS RDC",
          "icon": "mdi:home-floor-0",
          "subview": false,
          "cards": [],
          "badges": [
            {
              "entity": "switch.lumiere_salon"
            },
            {
              "entity": "scene.tout_fermer"
            },
            {
              "entity": "scene.ouvrir_volet"
            }
          ],
          "type": "sections",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading": "RDC"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_salon",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.store_salon"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_couloir",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_cuisine",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.store_entree"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.porte_garage"
                }
              ]
            }
          ],
          "max_columns": 4
        },
        {
          "title": "VOLETS ETAGE",
          "icon": "mdi:home-floor-1",
          "subview": false,
          "cards": [],
          "badges": [
            {
              "entity": "scene.tout_fermer"
            },
            {
              "entity": "scene.ouvrir_volet"
            }
          ],
          "type": "sections",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_lisa",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_leo",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_parents",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "type": "tile",
                  "entity": "cover.volet_bureau",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ]
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "entity": "cover.volet_velux_lisa",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.velux_lisa"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.velux_bureau"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.volet_velux_bureau"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.fenetre_salle_de_bains"
                },
                {
                  "features": [
                    {
                      "type": "cover-open-close"
                    },
                    {
                      "type": "cover-position"
                    }
                  ],
                  "type": "tile",
                  "color": "primary",
                  "vertical": true,
                  "hide_state": false,
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_tap_action": {
                    "action": "toggle"
                  },
                  "entity": "cover.volet_velux_salle_de_bains"
                }
              ]
            }
          ],
          "max_columns": 10
        },
        {
          "title": "Caméras",
          "path": "cameras",
          "icon": "mdi:webcam",
          "cards": [
            {
              "show_state": true,
              "show_name": true,
              "camera_view": "live",
              "type": "picture-entity",
              "entity": "camera.camera_hub_g2hpro_7273",
              "camera_image": "camera.camera_hub_g2hpro_7273"
            },
            {
              "show_state": true,
              "show_name": true,
              "camera_view": "live",
              "type": "picture-entity",
              "entity": "camera.camera_hub_g3_a121",
              "camera_image": "camera.camera_hub_g3_a121"
            }
          ]
        },
        {
          "icon": "mdi:battery-outline",
          "title": "Batteries",
          "path": "devices",
          "cards": [
            {
              "type": "custom:battery-state-card"
            }
          ]
        },
        {
          "title": "Device",
          "path": "device",
          "icon": "mdi:account-group",
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "device_tracker.iphone_de_mat_old",
                      "secondary_info": "last-changed",
                      "fill_container": true,
                      "primary_info": "name",
                      "layout": "vertical",
                      "icon_type": "icon"
                    },
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "device_tracker.air_de_mathieu",
                      "secondary_info": "last-changed",
                      "fill_container": true,
                      "primary_info": "name",
                      "layout": "vertical",
                      "icon_type": "icon"
                    },
                    {
                      "type": "history-graph",
                      "entities": [
                        {
                          "entity": "device_tracker.iphone_de_mat_old"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "device_tracker.iphone_marine",
                      "secondary_info": "last-changed",
                      "fill_container": true,
                      "primary_info": "name",
                      "layout": "vertical",
                      "icon_type": "icon"
                    },
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "device_tracker.air_de_marine",
                      "secondary_info": "last-changed",
                      "fill_container": true,
                      "primary_info": "name",
                      "layout": "vertical",
                      "icon_type": "icon"
                    },
                    {
                      "type": "history-graph",
                      "entities": [
                        {
                          "entity": "device_tracker.iphone_marine"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "title": "Ping",
          "path": "ping",
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.176_129_131_234_temps_daller_retour_maximum"
                      ],
                      "name": "Internet",
                      "height": 50
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.8_8_8_8_temps_daller_retour_maximum"
                      ],
                      "name": "DNS",
                      "height": 50
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.192_168_1_138_temps_daller_retour_maximum"
                      ],
                      "name": "DECO LAN",
                      "height": 50
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.192_168_1_254_temps_daller_retour_maximum"
                      ],
                      "name": "BBOX",
                      "height": 50
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.192_168_1_84_temps_daller_retour_maximum"
                      ],
                      "name": "NUC ETH1",
                      "height": 50
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.192_168_68_1_temps_daller_retour_maximum"
                      ],
                      "name": "DECO Entrée",
                      "height": 50
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.192_168_68_250_temps_daller_retour_maximum"
                      ],
                      "name": "DECO Salon",
                      "height": 50
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "title": "ULANZI",
          "path": "ulanzi",
          "icon": "mdi:overscan",
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_number.zoom",
                      "name": "Echelle"
                    }
                  ]
                },
                {
                  "type": "iframe",
                  "url": "http://192.168.68.130/screen",
                  "aspect_ratio": "33%",
                  "visibility": [
                    {
                      "condition": "state",
                      "entity": "light.awtrix_matrix",
                      "state": "on"
                    }
                  ],
                  "card_mod": {
                    "style": "div#root iframe  {\n  transform: scale({{states(\"input_number.test_level_1\")|float / 100|float}});\n  transform-origin: 0 0;\n  width: 1000px;\n  height: 320px;\n}\n"
                  }
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "show_name": false,
                      "show_icon": true,
                      "type": "button",
                      "entity": "button.awtrix_previous_app",
                      "tap_action": {
                        "action": "toggle"
                      }
                    },
                    {
                      "show_name": false,
                      "show_icon": true,
                      "type": "button",
                      "entity": "light.awtrix_matrix",
                      "show_state": true,
                      "icon_height": "60px"
                    },
                    {
                      "show_name": false,
                      "show_icon": true,
                      "type": "button",
                      "entity": "button.awtrix_next_app",
                      "name": "Next",
                      "tap_action": {
                        "action": "toggle"
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "switch.awtrix_transition",
                          "name": "Transitions"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "select.awtrix_transition_effect",
                          "name": "Transitions"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "select.awtrix_brightness_mode",
                          "name": "Brigthness"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_illuminance",
                          "name": "Lumière"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_battery",
                          "name": "Batterie"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_temperature",
                          "name": "Temperature"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_humidity",
                          "name": "Humidité"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_uptime",
                          "name": "Uptime"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_ip_address",
                          "name": "IP"
                        },
                        {
                          "entity": "sensor.awtrix_2e487c_version",
                          "name": "Version"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "iframe",
              "url": "http://192.168.68.130/",
              "aspect_ratio": "180%"
            }
          ]
        },
        {
          "icon": "mdi:stack-exchange",
          "path": "vu-meter",
          "title": "Vu Meter",
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_11\", \"rgb_color\") if is_state('light.wled1_segment_11', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_10\", \"rgb_color\") if is_state('light.wled1_segment_10', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_9\", \"rgb_color\") if is_state('light.wled1_segment_9', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_8\", \"rgb_color\") if is_state('light.wled1_segment_8', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_7\", \"rgb_color\") if is_state('light.wled1_segment_7', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_6\", \"rgb_color\") if is_state('light.wled1_segment_6', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_5\", \"rgb_color\") if is_state('light.wled1_segment_5', 'on') else '(224, 224, 224)'}};\n  height: 10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_4\", \"rgb_color\") if is_state('light.wled1_segment_4', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;} \n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_3\", \"rgb_color\") if is_state('light.wled1_segment_3', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}        \n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_2\", \"rgb_color\") if is_state('light.wled1_segment_2', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}       \n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_1\", \"rgb_color\") if is_state('light.wled1_segment_1', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}        \n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_0\", \"rgb_color\") if is_state('light.wled1_segment_0', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}         \n    \n"
                          }
                        },
                        {
                          "type": "custom:mini-graph-card",
                          "name": "Production",
                          "entities": [
                            "sensor.production_solaire"
                          ],
                          "decimals": 0,
                          "height": 0,
                          "font_size": 100,
                          "align_state": "center",
                          "align_header": "center",
                          "show": {
                            "icon": false
                          }
                        }
                      ]
                    },
                    {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_23\", \"rgb_color\") if is_state('light.wled1_segment_23', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_22\", \"rgb_color\") if is_state('light.wled1_segment_22', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_21\", \"rgb_color\") if is_state('light.wled1_segment_21', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_20\", \"rgb_color\") if is_state('light.wled1_segment_20', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_19\", \"rgb_color\") if is_state('light.wled1_segment_19', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_18\", \"rgb_color\") if is_state('light.wled1_segment_18', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_17\", \"rgb_color\") if is_state('light.wled1_segment_17', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_16\", \"rgb_color\") if is_state('light.wled1_segment_16', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_15\", \"rgb_color\") if is_state('light.wled1_segment_15', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_14\", \"rgb_color\") if is_state('light.wled1_segment_14', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_13\", \"rgb_color\") if is_state('light.wled1_segment_13', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:button-card",
                          "card_mod": {
                            "style": "ha-card  {\n  background-color: rgba{{state_attr(\"light.wled1_segment_12\", \"rgb_color\") if is_state('light.wled1_segment_12', 'on') else '(224, 224, 224)'}};\n  height:10px !important;\n  width: 20\n  border: 1px solid grey !important;}\n"
                          }
                        },
                        {
                          "type": "custom:mini-graph-card",
                          "name": "Surplus",
                          "entities": [
                            "sensor.surplus_production"
                          ],
                          "decimals": 0,
                          "height": 0,
                          "font_size": 100,
                          "align_state": "center",
                          "align_header": "center",
                          "show": {
                            "icon": false
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    "light.wled1_principal",
                    "select.wled1_prereglage",
                    "number.wled1_intensite",
                    "button.wled1_redemarrer",
                    "switch.wled1_veilleuse",
                    "number.wled1_vitesse",
                    "sensor.wled1_courant_estime",
                    "sensor.wled1_ip"
                  ]
                }
              ]
            },
            {
              "type": "iframe",
              "url": "http://192.168.68.134",
              "aspect_ratio": "200%"
            }
          ]
        },
        {
          "type": "sections",
          "max_columns": 4,
          "title": "ESP32",
          "path": "esp32",
          "icon": "mdi:chip",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading_style": "subtitle"
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "show_name": true,
                      "show_icon": true,
                      "show_state": true,
                      "type": "glance",
                      "entities": [
                        {
                          "entity": "sensor.esp32_test_tension_esp32",
                          "name": "GPIO32"
                        },
                        {
                          "entity": "sensor.esp32_test_tension_esp32_33",
                          "name": "GPIO33"
                        },
                        {
                          "entity": "sensor.esp32_test_tension_esp32_34",
                          "name": "GPIO34"
                        },
                        {
                          "entity": "sensor.esp32_test_tension_esp32_35",
                          "name": "GPIO35"
                        },
                        {
                          "entity": "sensor.esp32_test_tension_esp32_36",
                          "name": "GPIO36"
                        },
                        {
                          "entity": "sensor.esp32_test_tension_esp32_37",
                          "name": "GPIO37"
                        }
                      ],
                      "state_color": false,
                      "columns": 6
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.esp32_test_tension_esp32"
                    },
                    {
                      "entity": "sensor.esp32_test_tension_esp32_33"
                    },
                    {
                      "entity": "sensor.esp32_test_tension_esp32_34"
                    },
                    {
                      "entity": "sensor.esp32_test_tension_esp32_35"
                    },
                    {
                      "entity": "sensor.esp32_test_tension_esp32_36"
                    },
                    {
                      "entity": "sensor.esp32_test_tension_esp32_37"
                    }
                  ],
                  "show_names": false,
                  "hours_to_show": 12
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "input_number.pwm_historique"
                    }
                  ],
                  "hours_to_show": 12
                },
                {
                  "chart_type": "bar",
                  "period": "hour",
                  "type": "statistics-graph",
                  "entities": [
                    "sensor.energie_radiateur"
                  ],
                  "days_to_show": 1,
                  "stat_types": [
                    "change"
                  ]
                },
                {
                  "type": "statistic",
                  "period": {
                    "calendar": {
                      "period": "day"
                    }
                  },
                  "stat_type": "change",
                  "entity": "sensor.energie_radiateur",
                  "grid_options": {
                    "columns": 12,
                    "rows": 2
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "sections",
          "max_columns": 4,
          "title": "Apex",
          "path": "apex",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:content-card-linky",
                  "entity": "sensor.linky_16127930466069_consumption",
                  "showIcon": true,
                  "showTitle": true,
                  "showHistory": true,
                  "showPeakOffPeak": true,
                  "showInTableUnit": false,
                  "showDayPrice": false,
                  "showDayPriceHCHP": false,
                  "showPrice": true,
                  "showDayHCHP": true,
                  "showDayMaxPower": false,
                  "showYearRatio": true,
                  "showCurrentMonthRatio": true,
                  "showMonthRatio": true,
                  "showWeekRatio": true,
                  "showYesterdayRatio": true,
                  "showTitleLign": true,
                  "showError": true,
                  "showHeader": true,
                  "showEcoWatt": false,
                  "showEcoWattJ12": false,
                  "showTempo": false,
                  "showTempoColor": false,
                  "showDayName": "narrow"
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:apexcharts-card",
                      "graph_span": "6d",
                      "span": {
                        "start": "day",
                        "offset": "-6d"
                      },
                      "header": {
                        "show": true,
                        "title": "Conso des 6 derniers jours",
                        "show_states": true,
                        "colorize_states": true
                      },
                      "stacked": true,
                      "series": [
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "stack_group": "1",
                          "yaxis_id": "gauche",
                          "name": "Conso HP",
                          "unit": "KWh",
                          "color": "deepskyblue",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": false
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_HP[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "stack_group": "1",
                          "yaxis_id": "gauche",
                          "name": "Conso HC",
                          "unit": "KWh",
                          "color": "orange",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": false
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_HC[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.energie_consommee_j_hp",
                          "yaxis_id": "droite",
                          "name": "Conso mesurée HP",
                          "stack_group": "2",
                          "unit": "KWh",
                          "color": "SteelBlue",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "statistics": {
                            "type": "change",
                            "period": "day",
                            "align": "start"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": false
                          }
                        },
                        {
                          "entity": "sensor.energie_consommee_j_hc",
                          "yaxis_id": "droite",
                          "name": "Conso mesurée HC",
                          "stack_group": "2",
                          "unit": "KWh",
                          "color": "DarkOrange",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "statistics": {
                            "type": "change",
                            "period": "day",
                            "align": "start"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": false
                          }
                        }
                      ],
                      "apex_config": {
                        "xaxis": {
                          "labels": {
                            "show": true
                          }
                        },
                        "yaxis": [
                          {
                            "id": "droite",
                            "min": 0,
                            "max": 50,
                            "opposite": true,
                            "decimals": 1,
                            "show": false
                          },
                          {
                            "id": "gauche",
                            "min": 0,
                            "max": 50,
                            "opposite": false,
                            "decimalsInFloat": 0,
                            "show": true
                          }
                        ],
                        "legend": {
                          "show": false
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:mushroom-template-card",
                  "primary": "MAJ",
                  "secondary": "{{state_attr('sensor.linky_16127930466069_consumption_history','lastUpdate')}}",
                  "icon": "mdi:update",
                  "icon_color": "light-blue",
                  "layout": "horizontal",
                  "fill_container": true,
                  "multiline_secondary": true,
                  "tap_action": {
                    "action": "perform-action",
                    "perform_action": "hassio.addon_restart",
                    "data": {
                      "addon": "db21ed7f_enedisgateway2mqtt"
                    }
                  },
                  "hold_action": {
                    "action": "more-info"
                  },
                  "double_tap_action": {
                    "action": "perform-action",
                    "perform_action": "homeassistant.reload_config_entry",
                    "target": {
                      "device_id": [
                        "c7ecdd43c3644d34ba737a6f7d8c7eb7",
                        "7af9f86ff6d31ad1498b844989401361"
                      ],
                      "entity_id": "sensor.linky_16127930466069_consumption"
                    }
                  }
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:apexcharts-card",
                      "graph_span": "6d",
                      "span": {
                        "start": "day",
                        "offset": "-6d"
                      },
                      "header": {
                        "show": true,
                        "title": "Conso des 6 derniers jours",
                        "show_states": true,
                        "colorize_states": true
                      },
                      "stacked": true,
                      "series": [
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "stack_group": "1",
                          "yaxis_id": "gauche",
                          "name": "Conso HP",
                          "unit": "KWh",
                          "color": "deepskyblue",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 4,
                          "show": {
                            "datalabels": false
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_HP[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "stack_group": "1",
                          "yaxis_id": "gauche",
                          "name": "Conso HC",
                          "unit": "KWh",
                          "color": "orange",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 4,
                          "show": {
                            "datalabels": false
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_HC[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "yaxis_id": "gauche",
                          "name": "Conso totale",
                          "unit": "KWh",
                          "color": "red",
                          "type": "line",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": true
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.daily[index]];\n        });\n"
                        }
                      ],
                      "apex_config": {
                        "xaxis": {
                          "labels": {
                            "show": true
                          }
                        },
                        "yaxis": [
                          {
                            "id": "gauche",
                            "min": 0,
                            "max": 50,
                            "opposite": false,
                            "labels": {
                              "show": true
                            }
                          }
                        ],
                        "legend": {
                          "show": false
                        },
                        "chart": {
                          "stacked": true
                        }
                      }
                    }
                  ],
                  "visibility": [
                    {
                      "condition": "user",
                      "users": [
                        "7b481de444a94b4b86a065bf4afa5cbb"
                      ]
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:apexcharts-card",
                      "graph_span": "6d",
                      "span": {
                        "start": "day",
                        "offset": "-6d"
                      },
                      "header": {
                        "show": true,
                        "title": "Coûts des 6 derniers jours et résumé d'hier",
                        "show_states": true,
                        "colorize_states": true
                      },
                      "series": [
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "yaxis_id": "gauche",
                          "name": "Coût HP",
                          "unit": "€",
                          "color": "deepskyblue",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 4,
                          "show": {
                            "datalabels": true
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_costHP[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "yaxis_id": "gauche",
                          "name": "Coût HC",
                          "unit": "€",
                          "color": "orange",
                          "type": "column",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 4,
                          "show": {
                            "datalabels": true
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_costHC[index]];\n        });\n"
                        },
                        {
                          "entity": "sensor.linky_16127930466069_consumption",
                          "yaxis_id": "droite",
                          "name": "Coût total",
                          "unit": "€",
                          "color": "red",
                          "type": "line",
                          "group_by": {
                            "duration": "1d",
                            "func": "max"
                          },
                          "opacity": 0.8,
                          "stroke_width": 2,
                          "show": {
                            "datalabels": true
                          },
                          "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_cost[index]];\n        });\n"
                        }
                      ],
                      "apex_config": {
                        "xaxis": {
                          "labels": {
                            "show": true
                          }
                        },
                        "yaxis": [
                          {
                            "id": "gauche",
                            "min": 0,
                            "max": 15,
                            "opposite": false,
                            "labels": {
                              "show": false
                            }
                          },
                          {
                            "id": "droite",
                            "min": 0,
                            "max": 17,
                            "opposite": true,
                            "labels": {
                              "show": false
                            }
                          }
                        ],
                        "legend": {
                          "show": false
                        },
                        "chart": {
                          "stacked": true
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "sections",
          "max_columns": 4,
          "title": "Test",
          "path": "test",
          "sections": [
            {
              "type": "grid",
              "cards": [
                {
                  "type": "custom:vertical-stack-in-card",
                  "cards": [
                    {
                      "type": "picture",
                      "image": "/local/images/NUC.png",
                      "tap_action": {
                        "action": "none"
                      },
                      "hold_action": {
                        "action": "none"
                      }
                    },
                    {
                      "type": "glance",
                      "entities": [
                        {
                          "entity": "sensor.serveur_cpu",
                          "icon": "mdi:chart-line",
                          "name": "Intel N97"
                        },
                        {
                          "entity": "sensor.disk_host_001_kpart512gbc2dvt_dev_nvme0n1_temperature",
                          "name": "2,6 GHz"
                        },
                        {
                          "entity": "sensor.node_host_001_disk_used",
                          "icon": "mdi:harddisk",
                          "name": "512Go"
                        },
                        {
                          "entity": "sensor.node_host_001_memory_used",
                          "icon": "mdi:chip",
                          "name": "16Go"
                        }
                      ]
                    },
                    {
                      "square": true,
                      "columns": 5,
                      "type": "grid",
                      "cards": [
                        {
                          "type": "custom:bar-card",
                          "direction": "up",
                          "entities": [
                            {
                              "entity": "sensor.disk_host_001_kpart512gbc2dvt_dev_nvme0n1_temperature",
                              "icon": "mdi:thermometer",
                              "name": "Boot",
                              "positions": {
                                "icon": "inside",
                                "name": "outside",
                                "value": "outside",
                                "indicator": "off"
                              },
                              "width": "25px",
                              "height": "35px",
                              "severity": [
                                {
                                  "from": "0",
                                  "to": "30",
                                  "color": "Green"
                                },
                                {
                                  "from": "30",
                                  "to": "40",
                                  "color": "Orange"
                                },
                                {
                                  "from": "40",
                                  "color": "Red",
                                  "to": "100"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "custom:bar-card",
                          "direction": "up",
                          "entities": [
                            {
                              "entity": "sensor.serveur_ssd_raisz_1",
                              "icon": "mdi:thermometer",
                              "name": "Raid1",
                              "width": "25px",
                              "height": "25px",
                              "positions": {
                                "icon": "inside",
                                "name": "outside",
                                "value": "outside",
                                "indicator": "off"
                              },
                              "severity": [
                                {
                                  "from": "0",
                                  "to": "30",
                                  "color": "Green"
                                },
                                {
                                  "from": "30",
                                  "to": "40",
                                  "color": "Orange"
                                },
                                {
                                  "from": "40",
                                  "color": "Red",
                                  "to": "100"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "custom:bar-card",
                          "direction": "up",
                          "entities": [
                            {
                              "entity": "sensor.serveur_ssd_raidz_2",
                              "icon": "mdi:thermometer",
                              "name": "Raid2",
                              "width": "25px",
                              "height": "25px",
                              "positions": {
                                "icon": "inside",
                                "name": "outside",
                                "value": "outside",
                                "indicator": "off"
                              },
                              "severity": [
                                {
                                  "from": "0",
                                  "to": "30",
                                  "color": "Green"
                                },
                                {
                                  "from": "30",
                                  "to": "40",
                                  "color": "Orange"
                                },
                                {
                                  "from": "40",
                                  "color": "Red",
                                  "to": "100"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "custom:bar-card",
                          "direction": "up",
                          "entities": [
                            {
                              "entity": "sensor.serveur_ssd_raidz_3",
                              "icon": "mdi:thermometer",
                              "name": "Raid3",
                              "width": "25px",
                              "height": "25px",
                              "positions": {
                                "icon": "inside",
                                "name": "outside",
                                "value": "outside",
                                "indicator": "off"
                              },
                              "severity": [
                                {
                                  "from": "0",
                                  "to": "30",
                                  "color": "Green"
                                },
                                {
                                  "from": "30",
                                  "to": "40",
                                  "color": "Orange"
                                },
                                {
                                  "from": "40",
                                  "color": "Red",
                                  "to": "100"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "custom:bar-card",
                          "direction": "up",
                          "entities": [
                            {
                              "entity": "sensor.serveur_ssd_media",
                              "icon": "mdi:thermometer",
                              "name": "Media",
                              "width": "25px",
                              "height": "25px",
                              "positions": {
                                "icon": "inside",
                                "name": "outside",
                                "value": "outside",
                                "indicator": "off"
                              },
                              "severity": [
                                {
                                  "from": "0",
                                  "to": "30",
                                  "color": "Green"
                                },
                                {
                                  "from": "30",
                                  "to": "40",
                                  "color": "Orange"
                                },
                                {
                                  "from": "40",
                                  "color": "Red",
                                  "to": "100"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "custom:bar-card",
                      "entities": [
                        {
                          "entity": "sensor.serveur_boot_used",
                          "icon": "mdi:harddisk",
                          "name": "Boot (72Go)",
                          "height": "25px",
                          "positions": {
                            "icon": "inside"
                          },
                          "color": "purple"
                        },
                        {
                          "entity": "sensor.serveur_raidz_used",
                          "icon": "mdi:harddisk",
                          "name": "RaidZ (2To)",
                          "height": "25px",
                          "positions": {
                            "icon": "inside"
                          },
                          "color": "purple"
                        },
                        {
                          "entity": "sensor.serveur_media_used",
                          "icon": "mdi:movie",
                          "name": "Media (500Go)",
                          "height": "25px",
                          "positions": {
                            "icon": "inside"
                          },
                          "color": "purple"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "sensor.serveur_last_boot",
                          "name": "Last boot"
                        }
                      ]
                    }
                  ]
                }
              ],
              "column_span": 4
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "heading",
                  "heading": "Nouvelle section"
                }
              ]
            }
          ]
        }
      ],
      "button_card_templates": {
        "custom_card_apexcharts_elec": {
          "variables": {
            "entity_1": {
              "entity_id": null,
              "icon": "[[[ return entity.attributes.icon ]]]",
              "name": "[[[ return entity.attributes.friendly_name ]]]",
              "color": "[[[\n  var colors = ['yellow', 'blue', 'red', 'green'];\n  var color = colors[Math.floor(Math.random() * colors.length)];\n  return color;\n]]]\n"
            },
            "entity_2": {
              "entity_id": null,
              "icon": "[[[ return entity.attributes.icon  ]]]",
              "name": "[[[ return entity.attributes.friendly_name ]]]",
              "color": "[[[\n  var colors = ['yellow', 'blue', 'red', 'green'];\n  var color = colors[Math.floor(Math.random() * colors.length)];\n  return color;\n]]]\n"
            },
            "entity_3": {
              "entity_id": null,
              "icon": "[[[ return entity.attributes.icon  ]]]",
              "name": "[[[ return entity.attributes.friendly_name ]]]",
              "color": "[[[\n  var colors = ['yellow', 'blue', 'red','green'];\n  var color = colors[Math.floor(Math.random() * colors.length)];\n  return color;\n]]]\n"
            },
            "entity_4": {
              "entity_id": null,
              "icon": "[[[ return entity.attributes.icon  ]]]",
              "name": "[[[ return entity.attributes.friendly_name ]]]",
              "color": "[[[\n  var colors = ['yellow', 'blue', 'red','green'];\n  var color = colors[Math.floor(Math.random() * colors.length)];\n  return color;\n]]]\n"
            },
            "entity_5": {
              "entity_id": null,
              "icon": "[[[ return entity.attributes.icon  ]]]",
              "name": "[[[ return entity.attributes.friendly_name ]]]",
              "color": "[[[\n  var colors = ['yellow', 'blue', 'red','green'];\n  var color = colors[Math.floor(Math.random() * colors.length)];\n  return color;\n]]]\n"
            }
          },
          "color": "auto",
          "variable": "spin",
          "spin": false,
          "show_name": false,
          "show_state": false,
          "show_label": false,
          "show_icon": false,
          "show_last_changed": true,
          "show_entity_picture": false,
          "styles": {
            "grid": [
              {
                "grid-template-areas": "'item1' 'item2' 'radial'"
              },
              {
                "grid-template-columns": "1fr"
              },
              {
                "grid-template-rows": "min-content min-content min-content"
              }
            ],
            "card": [
              {
                "border-radius": "var(--border-radius)"
              },
              {
                "padding": "5px"
              }
            ]
          },
          "custom_fields": {
            "item1": {
              "card": {
                "type": "custom:button-card",
                "template": "list_3_items",
                "custom_fields": {
                  "item1": {
                    "card": {
                      "type": "custom:button-card",
                      "entity": "[[[ return variables.entity_1.entity_id ]]]",
                      "name": "[[[ return variables.entity_1.name ]]]",
                      "icon": "[[[ return variables.entity_1.icon ]]]",
                      "template": [
                        "icon_info_bg"
                      ],
                      "styles": {
                        "icon": [
                          {
                            "color": "[[[ return `rgba(var(--color-${variables.entity_1.color}), 1)`;]]]"
                          }
                        ],
                        "img_cell": [
                          {
                            "background-color": "[[[ return `rgba(var(--color-${variables.entity_1.color}), 0.20)`;]]]"
                          }
                        ],
                        "card": [
                          {
                            "box-shadow": "none"
                          },
                          {
                            "border-radius": "none"
                          },
                          {
                            "width": "auto"
                          },
                          {
                            "padding": "5px"
                          }
                        ]
                      },
                      "label": "[[[ \n        return states[variables.entity_1.entity_id].state + \" KWh\";\n]]]\n"
                    }
                  },
                  "item2": {
                    "card": {
                      "type": "custom:button-card",
                      "entity": "[[[ return variables.entity_2.entity_id ]]]",
                      "name": "[[[ return variables.entity_2.name ]]]",
                      "icon": "[[[ return variables.entity_2.icon ]]]",
                      "template": [
                        "icon_info_bg"
                      ],
                      "styles": {
                        "icon": [
                          {
                            "color": "[[[ return `rgba(var(--color-${variables.entity_2.color}), 1)`;]]]"
                          }
                        ],
                        "img_cell": [
                          {
                            "background-color": "[[[ return `rgba(var(--color-${variables.entity_2.color}), 0.20)`;]]]"
                          }
                        ],
                        "card": [
                          {
                            "box-shadow": "none"
                          },
                          {
                            "border-radius": "none"
                          },
                          {
                            "width": "auto"
                          },
                          {
                            "padding": "5px"
                          }
                        ]
                      },
                      "label": "[[[ \n        return states[variables.entity_2.entity_id].state + \" KWh\";\n]]]\n"
                    }
                  },
                  "item3": {
                    "card": {
                      "type": "custom:button-card",
                      "entity": "[[[ return variables.entity_3.entity_id ]]]",
                      "name": "[[[ return variables.entity_3.name ]]]",
                      "icon": "[[[ return variables.entity_3.icon ]]]",
                      "template": [
                        "icon_info_bg"
                      ],
                      "styles": {
                        "icon": [
                          {
                            "color": "[[[ return `rgba(var(--color-${variables.entity_3.color}), 1)`;]]]"
                          }
                        ],
                        "img_cell": [
                          {
                            "background-color": "[[[ return `rgba(var(--color-${variables.entity_3.color}), 0.20)`;]]]"
                          }
                        ],
                        "card": [
                          {
                            "box-shadow": "none"
                          },
                          {
                            "border-radius": "none"
                          },
                          {
                            "width": "auto"
                          },
                          {
                            "padding": "5px"
                          }
                        ]
                      },
                      "label": "[[[ \n        return states[variables.entity_3.entity_id].state + \" KWh\";\n]]]\n"
                    }
                  }
                }
              }
            },
            "item2": {
              "card": {
                "type": "custom:button-card",
                "template": "list_2_items",
                "custom_fields": {
                  "item1": {
                    "card": {
                      "type": "custom:button-card",
                      "entity": "[[[ return variables.entity_4.entity_id ]]]",
                      "name": "[[[ return variables.entity_4.name ]]]",
                      "icon": "[[[ return variables.entity_4.icon ]]]",
                      "template": [
                        "icon_info_bg"
                      ],
                      "styles": {
                        "icon": [
                          {
                            "color": "[[[ return `rgba(var(--color-${variables.entity_4.color}), 1)`;]]]"
                          }
                        ],
                        "img_cell": [
                          {
                            "background-color": "[[[ return `rgba(var(--color-${variables.entity_4.color}), 0.20)`;]]]"
                          }
                        ],
                        "card": [
                          {
                            "box-shadow": "none"
                          },
                          {
                            "border-radius": "none"
                          },
                          {
                            "width": "auto"
                          },
                          {
                            "padding": "5px"
                          }
                        ]
                      },
                      "label": "[[[ \n        return states[variables.entity_4.entity_id].state + \" KWh\";\n]]]\n"
                    }
                  },
                  "item2": {
                    "card": {
                      "type": "custom:button-card",
                      "tap_action": {
                        "action": "more-info"
                      },
                      "entity": "[[[ return variables.entity_5.entity_id ]]]",
                      "name": "[[[ return variables.entity_5.name ]]]",
                      "icon": "[[[ return variables.entity_5.icon ]]]",
                      "template": [
                        "icon_info_bg"
                      ],
                      "styles": {
                        "icon": [
                          {
                            "color": "[[[ return `rgba(var(--color-${variables.entity_5.color}), 1)`;]]]"
                          }
                        ],
                        "img_cell": [
                          {
                            "background-color": "[[[ return `rgba(var(--color-${variables.entity_5.color}), 0.20)`;]]]"
                          }
                        ],
                        "card": [
                          {
                            "box-shadow": "none"
                          },
                          {
                            "border-radius": "none"
                          },
                          {
                            "width": "auto"
                          },
                          {
                            "padding": "5px"
                          }
                        ]
                      },
                      "label": "[[[ \n        return states[variables.entity_5.entity_id].state;\n]]]\n"
                    }
                  }
                }
              }
            },
            "radial": {
              "card": {
                "type": "custom:apexcharts-card",
                "graph_span": "7d",
                "span": {
                  "start": "day",
                  "offset": "-7d"
                },
                "header": {
                  "show": true,
                  "title": "Consommations des 7 derniers jours",
                  "show_states": true,
                  "colorize_states": true
                },
                "series": [
                  {
                    "entity": "sensor.myelectricaldata_XXX",
                    "name": "Conso",
                    "unit": "kWh",
                    "color": "deepskyblue",
                    "type": "column",
                    "group_by": {
                      "duration": "1d",
                      "func": "max"
                    },
                    "opacity": 0.8,
                    "stroke_width": 4,
                    "show": {
                      "datalabels": true
                    },
                    "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.daily[index]];\n        });\n"
                  },
                  {
                    "entity": "sensor.myelectricaldata_XXXX",
                    "name": "Coût",
                    "unit": "€",
                    "color": "orange",
                    "type": "column",
                    "group_by": {
                      "duration": "1d",
                      "func": "max"
                    },
                    "opacity": 0.8,
                    "stroke_width": 4,
                    "show": {
                      "datalabels": true
                    },
                    "data_generator": "return entity.attributes.dailyweek.map((dailyweek, index) => {     \n          return [new Date(dailyweek).getTime(), entity.attributes.dailyweek_cost[index]];\n        });\n"
                  }
                ],
                "apex_config": {
                  "xaxis": {
                    "labels": {
                      "show": true
                    }
                  },
                  "yaxis": {
                    "labels": {
                      "show": true
                    }
                  },
                  "legend": {
                    "show": false
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}